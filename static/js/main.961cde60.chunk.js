(this["webpackJsonparcade-sprite-pack"]=this["webpackJsonparcade-sprite-pack"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(12),r=a.n(i),o=(a(19),a(1)),c=a(2),l=a(4),u=a(3),A=a(10),d=(a(20),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onAlertClick",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){if(!this.props.visible)return s.a.createElement("div",null);var e=this.props,t=e.title,a=e.text,n=e.icon,i=e.options;return s.a.createElement("div",{className:"alert-container",onClick:this.props.onClose},s.a.createElement("div",{className:"alert",onClick:this.onAlertClick},s.a.createElement("div",{className:"alert-title"},n&&s.a.createElement("i",{className:"alert-icon icon ".concat(n)}),s.a.createElement("span",null,t),s.a.createElement("i",{className:"icon delete",onClick:this.props.onClose})),s.a.createElement("div",{className:"alert-text"},a),this.props.children&&this.props.children,i&&s.a.createElement("div",{className:"alert-options"},i.map((function(e,t){return s.a.createElement("div",{key:t,onClick:e.onClick},e.text)})))))}}]),a}(s.a.Component)),h=(a(21),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).renameInput=void 0,n.onBlur=function(e){n.props.onRename&&n.props.onRename(e.target.value),n.setState({renaming:!1})},n.onDoubleClick=function(e){n.setState({renaming:!0})},n.handleInputRef=function(e){n.renameInput=e},n.state={renaming:!0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.renameInput.focus()}},{key:"componentDidUpdate",value:function(e,t){this.state.renaming&&!t.renaming&&this.renameInput.focus()}},{key:"render",value:function(){var e=this.props,t=e.info,a=e.selected,n=e.onClick,i=e.onDelete,r=t.name,o=t.jres;return s.a.createElement("div",{className:"asset ".concat(a?"selected":""),onClick:n},a&&s.a.createElement("div",{className:"asset-delete",onClick:i},s.a.createElement("i",{className:"icon delete"})),s.a.createElement("div",{className:"asset-img"},s.a.createElement("img",{src:o.previewURI,alt:"Preview of asset"})),this.state.renaming?s.a.createElement("input",{className:"asset-rename",onBlur:this.onBlur,defaultValue:r,ref:this.handleInputRef}):s.a.createElement("div",{className:"asset-title",onDoubleClick:this.onDoubleClick},s.a.createElement("span",null,r)))}}]),a}(s.a.Component)),m=a(5),f=a.n(m),p=a(6);function v(e,t,a,n,s){return k(function(e){var t=atob(e.slice(e.indexOf(",")+1)),a=t.charCodeAt(0),n=t.charCodeAt(1),s=t.charCodeAt(2);135===a&&(a=224|t.charCodeAt(1),n=t.charCodeAt(2)|t.charCodeAt(3)<<8,s=t.charCodeAt(4)|t.charCodeAt(5)<<8,t=t.slice(4));var i=new C(n,s),r=4;if(225===a)for(var o=1,c=t.charCodeAt(r++),l=0;l<n;++l)for(var u=0;u<s;++u)i.set(l,u,c&o?1:0),256==(o<<=1)&&(o=1,c=t.charCodeAt(r++));else for(var A=0;A<n;A++){for(var d=0;d<s;d+=2){var h=t.charCodeAt(r++);i.set(A,d,15&h),d!=s-1&&i.set(A,d+1,h>>4&15)}for(;3&r;)r++}return i}(e),t,e,a,n,s)}function g(e,t,a){return k(function(e,t){!(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n"))&&t&&(e=t);for(var a=e.split("\n"),n=[],s=0,i=0;i<a.length;i++){for(var r=a[i],o=[],c=0;c<r.length;c++)switch(r[c]){case"0":case".":o.push(0);break;case"1":case"#":o.push(1);break;case"2":case"T":o.push(2);break;case"3":case"t":o.push(3);break;case"4":case"N":o.push(4);break;case"5":case"n":o.push(5);break;case"6":case"G":o.push(6);break;case"7":case"g":o.push(7);break;case"8":o.push(8);break;case"9":o.push(9);break;case"a":case"A":case"R":o.push(10);break;case"b":case"B":case"P":o.push(11);break;case"c":case"C":case"p":o.push(12);break;case"d":case"D":case"O":o.push(13);break;case"e":case"E":case"Y":o.push(14);break;case"f":case"F":case"W":o.push(15)}o.length&&(n.push(o),s=Math.max(s,o.length))}for(var l=n.length,u=new C(s,l),A=0;A<l;A++)for(var d=n[A],h=0;h<s;h++)h<d.length?u.set(h,A,d[h]):u.set(h,A,0);return u}(e),t,void 0,void 0,void 0,a)}function k(e,t,a,n,s,i){return{width:e.width,height:e.height,data:a||y(e),previewURI:E(e,t),qualifiedName:n,tilemapTile:s,sourceFile:i}}function b(e,t,a,n){for(var s=A(224|a)+A(e)+A(t)+"00",i=4,r=0,o=0,c=function(e){r|=e<<o,o==8-a?(s+=A(r),i++,r=0,o=0):o+=a},l=0;l<e;++l){for(var u=0;u<t;++u)c(n(l,u));for(;0!=o;)c(0);if(a>1)for(;3&i;)c(0)}return s;function A(e){return("0"+e.toString(16)).slice(-2)}}function y(e){var t=b(e.width,e.height,4,(function(t,a){return e.get(t,a)}));return btoa(function(e){for(var t=e.length,a="",n=0;n<t;++n)a+=String.fromCharCode(e[n]);return a}(function(e){for(var t=new Uint8ClampedArray(e.length>>1),a=0;a<e.length;a+=2)t[a>>1]=parseInt(e.slice(a,a+2),16);return t}(t)))}var C=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;Object(o.a)(this,e),this.width=t,this.height=a,this.x0=n,this.y0=s,this.buf=void 0,this.buf=i||new Uint8ClampedArray(this.dataLength())}return Object(c.a)(e,[{key:"set",value:function(e,t,a){if(e<this.width&&t<this.height&&e>=0&&t>=0){var n=this.coordToIndex(e,t);this.setCore(n,a)}}},{key:"get",value:function(e,t){if(e<this.width&&t<this.height&&e>=0&&t>=0){var a=this.coordToIndex(e,t);return this.getCore(a)}return 0}},{key:"coordToIndex",value:function(e,t){return e+t*this.width}},{key:"getCore",value:function(e){var t=Math.floor(e/2);return e%2===0?15&this.buf[t]:(240&this.buf[t])>>4}},{key:"setCore",value:function(e,t){var a=Math.floor(e/2);this.buf[a]=e%2===0?240&this.buf[a]|15&t:15&this.buf[a]|(15&t)<<4}},{key:"dataLength",value:function(){return Math.ceil(this.width*this.height/2)}}]),e}();function E(e,t){var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var n=a.getContext("2d");if(n)for(var s=0;s<e.width;s++)for(var i=0;i<e.height;i++){var r=e.get(s,i);r&&(n.fillStyle=t[r],n.fillRect(s,i,1,1))}return a.toDataURL()}var w=a(9),j=a(13),x="https://makecode.com/api",N=["#000000","#ffffff","#ff2121","#ff93c4","#ff8135","#fff609","#249ca3","#78dc52","#003fad","#87f2ff","#8e2ec4","#a4839f","#5c406c","#e5cdc4","#91463d","#000000"];function O(){return(O=Object(p.a)(f.a.mark((function e(t){var a,n,s,i,r,o,c,l,u,A,d,h,m,p,v,g,k,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return-1!==(a=t.trim()).indexOf("/")&&(a=a.substr(a.lastIndexOf("/")+1)),e.next=4,_(x+"/"+a);case 4:return n=e.sent,e.next=7,_(x+"/"+a+"/text");case 7:if(s=e.sent,i=s["pxt.json"],r=N,o=!1,i)try{(null===(c=JSON.parse(i))||void 0===c?void 0:c.palette)&&Array.isArray(c.palette)&&(r=c.palette.slice(),o=!0)}catch(f){}l=Object.keys(s).filter((function(e){return e.endsWith(".ts")||e.endsWith(".jres")})),u=[],A=Object(j.a)(l);try{for(A.s();!(d=A.n()).done;)h=d.value,m=s[h],h.endsWith("jres")?u.push.apply(u,Object(w.a)(I(m,h,r))):u.push.apply(u,Object(w.a)(S(m,h,r)))}catch(y){A.e(y)}finally{A.f()}for(p={},v=0,g=u;v<g.length;v++)k=g[v],(!(b=p[k.data])||!b.qualifiedName&&k.qualifiedName)&&(p[k.data]=k);return e.abrupt("return",{meta:n,files:s,projectImages:Object.keys(p).map((function(e){return p[e]})),customPalette:o?r:void 0});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;try{a=JSON.parse(e)}catch(d){return[]}for(var s=a["*"],i=(null===s||void 0===s?void 0:s.mimeType)||"",r=(null===s||void 0===s?void 0:s.namespace)||"",o=[],c=0,l=Object.keys(a);c<l.length;c++){var u=l[c];if("*"!==u){var A=a[u];"string"===typeof A?"image/x-mkcd-f4"===i&&o.push(v(A,n,r?r+"."+u:u,!1,t)):"image/x-mkcd-f4"===A.mimeType&&o.push(v(A.data,n,r?r+"."+u:u,A.tilemapTile,t))}}return o}function S(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N,n=/img\s*`[\s\da-f.#tngrpoyw]*`/gim,s=[];return e.replace(n,(function(e){return s.push(g(e,a,t)),""})),s}function _(e){return new Promise((function(t,a){var n=new XMLHttpRequest;n.addEventListener("error",(function(e){a(e)})),n.addEventListener("load",(function(){try{t(JSON.parse(n.responseText))}catch(e){a(e)}})),n.open("GET",e),n.send()}))}a(23);var R={data:"hwQQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",previewURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAH0lEQVQ4T2NkoBAwUqifYdQAhtEwYBgNA1A+Gvi8AAAmmAARf9qcXAAAAABJRU5ErkJggg==",width:16,height:16},M=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e))._items=void 0,n._inputRef=void 0,n.handleMessage=function(e){var t=e.data;switch(t.type){case"update":var a=v(t.message,N);if(void 0!==n.state.saving){var s=n.state.saving;n._items[n.state.selected].jres=a,n.setState({items:n._items,selected:s,saving:void 0})}else n._items[n.state.selected].jres=a,n.setState({items:n._items})}},n.loadJres=function(e){n.props.postMessage({type:"initialize",message:e.jres.data})},n.getJres=function(){n.props.postMessage({type:"update"})},n.onAssetClick=function(e){return function(){n.setState({saving:e})}},n.onAssetRename=function(e){return function(t){n.renameAsset(e,t)}},n.onAddButtonClick=function(){n.addAsset("mySprite")},n.onDeleteButtonClick=function(){n._items.length>1?n.setState({alert:{type:"delete",icon:"exclamation triangle",title:"Warning!",text:"Deleting an image is permanent. You will not be able to undo this action.",options:[{text:"Delete",onClick:function(){n.deleteAsset(n.state.selected),n.hideAlert()}}]}}):n.setState({alert:{type:"warning",icon:"ban",title:"Unable to delete",text:"You must have at least one image in your project."}})},n.onImportButtonClick=function(){n.setState({alert:{type:"import",icon:"upload",title:"Import Sprites",text:"Paste the URL to a shared game from MakeCode Arcade to import sprites from an existing project.",options:[{text:"Import",onClick:function(){n.importAssets(n._inputRef.value),n.hideAlert()}}]}})},n.onExportButtonClick=function(){n.getJres()},n.hideAlert=function(){n.setState({alert:void 0})},n.handleInputRef=function(e){n._inputRef=e},n._items=[{name:"mySprite",jres:Object(A.a)({},R)}],n.state={items:n._items,selected:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"componentDidUpdate",value:function(e,t){void 0!==this.state.saving&&void 0===t.saving&&this.getJres(),this.state.selected===t.selected&&0!==this.state.selected||this.loadJres(this._items[this.state.selected])}},{key:"addAsset",value:function(e){this._items.push({name:this.getValidAssetName(e||"mySprite"),jres:Object(A.a)({},R)}),this.setState({items:this._items,saving:this._items.length-1})}},{key:"deleteAsset",value:function(e){this._items.splice(e,1),this.setState({items:this._items,selected:Math.max(e-1,0)})}},{key:"renameAsset",value:function(e,t){this._items[e].name!==t&&(this._items[e].name=this.getValidAssetName(t),this.setState({items:this._items}))}},{key:"importAssets",value:function(e,t){var a=this;(function(e){return O.apply(this,arguments)})(e).then((function(e){t&&(a._items=[]),e.projectImages.forEach((function(e){a._items.push({name:e.qualifiedName||a.getValidAssetName("mySprite"),jres:e})})),a.setState({items:a._items})}))}},{key:"getAssetIndex",value:function(e){return this._items.findIndex((function(t){return t.name.toLowerCase()===e.toLowerCase()}))}},{key:"getValidAssetName",value:function(e){for(e=e.replace(/[^a-zA-Z0-9]/g,"");this.getAssetIndex(e)>=0;){var t=e.match(/^(.*?)(\d+)$/);e=t?t[1]+(parseInt(t[2],10)+1):e+"2"}return e}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.selected,i=t.alert;return s.a.createElement("div",{id:"asset-list"},i&&s.a.createElement(d,{icon:i.icon,title:i.title,text:i.text,options:i.options,visible:!0,onClose:this.hideAlert},"import"===i.type&&s.a.createElement("input",{className:"asset-import",ref:this.handleInputRef,placeholder:"https://makecode.com/_r8fboJQTDPtH or https://arcade.makeode.com/62736-71128-62577-28722"})),s.a.createElement("div",{className:"asset-list-buttons"},s.a.createElement("div",{className:"asset-button",title:"Add asset",onClick:this.onAddButtonClick},s.a.createElement("i",{className:"icon plus square outline"})),s.a.createElement("div",{className:"asset-button",title:"Import assets",onClick:this.onImportButtonClick},s.a.createElement("i",{className:"icon upload"})),s.a.createElement("div",{className:"asset-button",title:"Export assets",onClick:this.onExportButtonClick},s.a.createElement("i",{className:"icon download"}))),s.a.createElement("div",null,a.map((function(t,a){return s.a.createElement(h,{key:a,info:t,selected:a===n,onClick:e.onAssetClick(a),onRename:e.onAssetRename(a),onDelete:e.onDeleteButtonClick})}))))}}]),a}(s.a.Component),B=(a(24),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).iframe=void 0,e.postMessage=function(t){e.iframe&&e.iframe.contentWindow&&(t._fromVscode=!0,e.iframe.contentWindow.postMessage(t,"*"))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.iframe=document.getElementById("editor")}},{key:"render",value:function(){return s.a.createElement("div",{className:"app"},s.a.createElement("iframe",{id:"editor",title:"MakeCode Arcade sprite editor",src:"https://arcade.makecode.com/beta--asseteditor"}),s.a.createElement(M,{postMessage:this.postMessage}))}}]),a}(s.a.Component));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(B,null)),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.961cde60.chunk.js.map