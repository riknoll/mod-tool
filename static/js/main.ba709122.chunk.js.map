{"version":3,"sources":["components/Alert.tsx","components/Asset.tsx","util.ts","images.ts","ignoredfields.ts","share.ts","dragAndDrop.ts","lzma.ts","export.ts","db.ts","components/AssetList.tsx","App.tsx","index.tsx"],"names":["Alert","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","evt","stopPropagation","preventDefault","this","props","visible","React","createElement","_this$props","title","text","icon","options","className","onClick","onAlertClick","concat","children","map","el","i","style","Component","Asset","_this","call","renameInput","onBlur","e","onRename","target","setState","renaming","onDoubleClick","handleInputRef","state","focus","prevProps","prevState","info","selected","jres","onDelete","name","src","previewURI","alt","browserDownloadUInt8Array","buf","contentType","length","undefined","userContextWindow","onError","browserDownloadBase64","btoa","uint8ArrayToString","browserDownloadText","filename","browserDownloadDataUri","toDownloadDataUri","uri","navigator","test","userAgent","ia","stringToUint8Array","atob","split","blob","Blob","type","window","msSaveOrOpenBlob","link","document","download","href","body","appendChild","click","removeChild","location","b64","saveBlob","dataurl","b","protocol","input","len","res","Uint8Array","charCodeAt","String","fromCharCode","unicodeES5IdentifierStart","unicodeES5IdentifierPart","reservedWords","escapeIdentifier","char","n","trim","replace","a","lookupInUnicodeMap","indexOf","charAt","code","mid","lo","hi","_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","result","__await","then","unwrapped","error","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","return","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","getImageFromURIAsync","_x","_getImageFromURIAsync","_asyncToGenerator","_callee","loaded","canvas","ctx","data","_context","loadImageAsync","width","height","getContext","drawImage","getImageData","pixels","_x2","_loadImageAsync","_callee2","_context2","onload","getJRESImageFromUint8Array","_x3","_x4","_getJRESImageFromUint8Array","_callee3","palette","encoded","imageInfo","imageLit","_context3","imgEncodeImage","getJRESImageFromImageLiteral","getJRESImageFromDataString","qname","tilemapTile","sourceFile","getJRESImage","jresDataToBitmap","literal","defaultPattern","rows","sprite","spriteWidth","r","row","rowValues","c","Math","max","spriteHeight","Bitmap","set","imageLiteralToBitmap","bitmap","base64EncodeBitmap","bitmapToImageURI","qualifiedName","imgEncodeJRESImage","image","fileType","hexChars","get","bitmapToImageLiteral","colors","colorsToNumbers","w","h","getPix","toString","join","imgEncodeImgCore","x","y","index","closestColor","color","parseColorString","_r","_g","_b","scale","v","pix","alpha","mindelta","idx","delta","f4EncodeImgCore","bpp","hex2","ptr","curr","shift","pushBits","j","hex","Uint8ClampedArray","parseInt","hexToUint8Array","substr","x0","y0","dataLength","col","coordToIndex","setCore","getCore","cell","floor","ceil","jresURL","magic","out","mask","frame","fillStyle","fillRect","toDataURL","ignoredValues","backendEndpoint","arcadePalette","fetchMakeCodeScriptAsync","_fetchMakeCodeScriptAsync","url","scriptID","meta","filesystem","config","paletteIsCustom","parsedConfig","projectImages","lastIndexOf","httpGetJSONAsync","JSON","parse","Array","isArray","grabImagesFromProject","files","grabTextFromProject","customPalette","blocks","strings","variableNames","assetNames","literalRegex","numbersymbol","startsWith","xml","DOMParser","parseFromString","fields","getElementsByTagName","_textContent","console","log","item","getAttribute","content","textContent","match","exec","comments","other","dedupe","s","_step","typescriptFiles","filter","endsWith","_iterator","_createForOfIteratorHelper","fileText","_toConsumableArray","grabImagesFromJRES","grabImagesFromTypeScript","f","seenImages","_i2","_projectImages","existing","jresText","metaEntry","metaMime","mimeType","metaNamespace","namespace","_i3","_Object$keys","id","request","XMLHttpRequest","addEventListener","responseText","open","send","fileReadAsBufferAsync","reader","FileReader","onerror","ev","readAsArrayBuffer","lzmaDecompressAsync","lzma","LZMA","decompress","TEST_SCRIPT","createProjectBlobAsync","assetTS","assetJRES","testTS","stringify","project","cloudId","targetVersions","editor","source","compress","lzmaCompressAsync","_downloadProjectAsync","assets","takenNames","projectNamespace","qualifiedNames","asset","identifier","escapeName","escaped","_downloadTypeScriptAsync","_iterator2","_step2","_db","openPromise","initDBAsync","_initDBAsync","indexedDB","event","onupgradeneeded","objectStore","createObjectStore","keyPath","createIndex","unique","onsuccess","lookupEntryAsync","_lookupEntryAsync","str","db","transaction","addEntryAsync","_addEntryAsync","approved","add","time","Date","now","isStringApprovedAsync","_isStringApprovedAsync","_callee4","_context4","markStringApprovedAsync","_x5","_markStringApprovedAsync","_callee5","_context5","DEFAULT_JRES","AssetList","_items","_importInputRef","_exportInputRef","_dragInit","handleMessage","msg","loadJres","jresImage","message","saving","items","autosaveJres","getJres","setTimeout","postMessage","onAssetClick","onAssetRename","renameAsset","onAssetDelete","alert","deleteAsset","hideAlert","onAddButtonClick","addAsset","onDeleteButtonClick","backgroundColor","clearAssets","onPaste","importAssets","clipboardData","getData","onImportButtonClick","onImportDragEnter","dragging","onImportDragLeave","onExportButtonClick","downloadProjectAsync","downloadTypeScriptAsync","handleImportInputRef","handleExportInputRef","handleDropRef","dragged","_ref","ext","_name","_buf","toLowerCase","getValidAssetName","t0","getAsFile","dataTransfer","types","found","dropEffect","removeEventListener","localStorage","setItem","_objectSpread","newName","_importAssets","_res$meta","_res$meta2","_res$meta3","_res$meta4","_res$meta5","scriptId","scriptTarget","runUrl","cvsHatesThisScript","ignoredFiles","_i","file","priorities","unapprovedText","_iterator3","_step3","_iterator4","_step4","_str","_iterator5","_step5","_str2","isdeleted","sort","t1","t2","t3","textItems","isDeleted","findIndex","getAssetIndex","_approveAllStringsAsync","strs","_iterator6","_step6","_approveAllImagesAsync","_iterator7","_step7","_this2","_this$state","_ref2","onClose","ref","onDragEnter","onDragLeave","placeholder","Fragment","approveAllImagesAsync","approveAllStringsAsync","sandbox","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OACniJC,EAA2B,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,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","file":"static/js/main.ba709122.chunk.js","sourcesContent":["import React from 'react';\r\nimport '../styles/Alert.css';\r\n\r\ninterface AlertOption {\r\n    text: string;\r\n    onClick: () => void;\r\n    style?: { [key: string]: string };\r\n}\r\n\r\nexport interface AlertProps {\r\n    title: string;\r\n    text: string;\r\n    icon?: string;\r\n    options?: AlertOption[];\r\n    visible?: boolean;\r\n    onClose?: () => void;\r\n}\r\n\r\nexport class Alert extends React.Component<AlertProps, {}> {\r\n    onAlertClick(evt: any) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.visible) return <div />;\r\n\r\n        const { title, text, icon, options } = this.props;\r\n        return <div className=\"alert-container\">\r\n            <div className=\"alert\" onClick={this.onAlertClick}>\r\n                <div className=\"alert-title\">\r\n                    {icon && <i className={`alert-icon icon ${icon}`}></i>}\r\n                    <span>{title}</span>\r\n                </div>\r\n                <div className=\"alert-text\">{text}</div>\r\n                {this.props.children && this.props.children}\r\n                {options && <div className=\"alert-options\">\r\n                    {options.map((el, i) => {\r\n                        return <div key={i} onClick={el.onClick} style={el.style}>{el.text}</div>\r\n                    })}\r\n                </div>}\r\n            </div>\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport { JRESImage } from '../images';\r\nimport '../styles/Asset.css';\r\n\r\nexport interface AssetInfo {\r\n    name: string;\r\n    jres: JRESImage;\r\n}\r\n\r\ninterface AssetProps {\r\n    info: AssetInfo;\r\n    selected: boolean;\r\n    onClick?: (e: any) => void;\r\n    onRename?: (name: string) => void;\r\n    onDelete?: (e: any) => void;\r\n}\r\n\r\ninterface AssetState {\r\n    renaming?: boolean;\r\n}\r\n\r\nexport class Asset extends React.Component<AssetProps, AssetState> {\r\n    private renameInput!: HTMLInputElement;\r\n    constructor(props: AssetProps) {\r\n        super(props);\r\n        this.state = { renaming: true }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.renameInput) this.renameInput.focus();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: AssetProps, prevState: AssetState) {\r\n        if (this.state.renaming && !prevState.renaming) {\r\n            this.renameInput.focus();\r\n        }\r\n    }\r\n\r\n    onBlur = (e: any) => {\r\n        if (this.props.onRename) this.props.onRename(e.target.value);\r\n        this.setState({ renaming: false });\r\n    }\r\n\r\n    onDoubleClick = (e: any) => {\r\n        this.setState({ renaming: true });\r\n    }\r\n\r\n    handleInputRef = (e: HTMLInputElement) => {\r\n        this.renameInput = e;\r\n    }\r\n\r\n    render() {\r\n        const { info, selected, onClick, onDelete } = this.props;\r\n        const { name, jres } = info;\r\n\r\n        return <div className={`asset ${selected ? \"selected\" : \"\"}`} onClick={onClick}>\r\n            <div className=\"asset-img\">\r\n                <img src={jres.previewURI} alt=\"Preview of asset\" />\r\n            </div>\r\n        </div>\r\n    }\r\n}","/**\r\n * This file contains util functions taken directly from pxt-core and lightly modified\r\n */\r\n\r\nexport const IMAGE_MIME_TYPE = \"image/x-mkcd-f4\"\r\n\r\nexport function browserDownloadUInt8Array(buf: Uint8Array, name: string, contentType: string = \"application/octet-stream\", userContextWindow?: Window, onError?: (err: any) => void): string {\r\n    return browserDownloadBase64(btoa(uint8ArrayToString(buf)), name, contentType, userContextWindow, onError)\r\n}\r\n\r\nexport function browserDownloadText(text: string, filename: string) {\r\n    const encoded = btoa(text);\r\n    browserDownloadDataUri(toDownloadDataUri(encoded, \"text/plain\"), filename)\r\n}\r\n\r\nexport function isEdge(): boolean {\r\n    return !!navigator && /Edge/i.test(navigator.userAgent);\r\n}\r\n\r\nexport function isIE(): boolean {\r\n    return !!navigator && /Trident/i.test(navigator.userAgent);\r\n}\r\n\r\nexport function browserDownloadDataUri(uri: string, name: string) {\r\n    if (isEdge() || isIE()) {\r\n        //Fix for edge\r\n        let byteString = atob(uri.split(',')[1]);\r\n        let ia = stringToUint8Array(byteString);\r\n        let blob = new Blob([ia], { type: \"img/png\" });\r\n        (window.navigator as any).msSaveOrOpenBlob(blob, name);\r\n    } else {\r\n        let link = <any>window.document.createElement('a');\r\n        if (typeof link.download == \"string\") {\r\n            link.href = uri;\r\n            link.download = name;\r\n            document.body.appendChild(link); // for FF\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        } else {\r\n            document.location.href = uri;\r\n        }\r\n    }\r\n}\r\n\r\nexport function browserDownloadBase64(b64: string, name: string, contentType: string = \"application/octet-stream\", userContextWindow?: Window, onError?: (err: any) => void): string {\r\n    const saveBlob = (<any>window).navigator.msSaveOrOpenBlob;\r\n    const dataurl = toDownloadDataUri(b64, name);\r\n    try {\r\n        if (saveBlob) {\r\n            const b = new Blob([stringToUint8Array(atob(b64))], { type: contentType })\r\n            const result = (<any>window).navigator.msSaveOrOpenBlob(b, name);\r\n        } else browserDownloadDataUri(dataurl, name);\r\n    } catch (e) {\r\n        if (onError) onError(e);\r\n    }\r\n    return dataurl;\r\n}\r\n\r\nexport function toDownloadDataUri(b64: string, contentType: string): string {\r\n    let protocol = \"data\";\r\n    const dataurl = protocol + \":\" + contentType + \";base64,\" + b64\r\n    return dataurl;\r\n}\r\n\r\n// this will take lower 8 bits from each character\r\nexport function stringToUint8Array(input: string) {\r\n    let len = input.length;\r\n    let res = new Uint8Array(len)\r\n    for (let i = 0; i < len; ++i)\r\n        res[i] = input.charCodeAt(i) & 0xff;\r\n    return res;\r\n}\r\n\r\nexport function hexToUint8Array(hex: string) {\r\n    let r = new Uint8ClampedArray(hex.length >> 1);\r\n    for (let i = 0; i < hex.length; i += 2)\r\n        r[i >> 1] = parseInt(hex.slice(i, i + 2), 16)\r\n    return r\r\n}\r\n\r\nexport function uint8ArrayToString(input: ArrayLike<number>) {\r\n    let len = input.length;\r\n    let res = \"\"\r\n    for (let i = 0; i < len; ++i)\r\n        res += String.fromCharCode(input[i]);\r\n    return res;\r\n}\r\n\r\n\r\nconst unicodeES5IdentifierStart = [170, 170, 181, 181, 186, 186, 192, 214, 216, 246, 248, 705, 710, 721, 736, 740, 748, 748, 750, 750, 880, 884, 886, 887, 890, 893, 902, 902, 904, 906, 908, 908, 910, 929, 931, 1013, 1015, 1153, 1162, 1319, 1329, 1366, 1369, 1369, 1377, 1415, 1488, 1514, 1520, 1522, 1568, 1610, 1646, 1647, 1649, 1747, 1749, 1749, 1765, 1766, 1774, 1775, 1786, 1788, 1791, 1791, 1808, 1808, 1810, 1839, 1869, 1957, 1969, 1969, 1994, 2026, 2036, 2037, 2042, 2042, 2048, 2069, 2074, 2074, 2084, 2084, 2088, 2088, 2112, 2136, 2208, 2208, 2210, 2220, 2308, 2361, 2365, 2365, 2384, 2384, 2392, 2401, 2417, 2423, 2425, 2431, 2437, 2444, 2447, 2448, 2451, 2472, 2474, 2480, 2482, 2482, 2486, 2489, 2493, 2493, 2510, 2510, 2524, 2525, 2527, 2529, 2544, 2545, 2565, 2570, 2575, 2576, 2579, 2600, 2602, 2608, 2610, 2611, 2613, 2614, 2616, 2617, 2649, 2652, 2654, 2654, 2674, 2676, 2693, 2701, 2703, 2705, 2707, 2728, 2730, 2736, 2738, 2739, 2741, 2745, 2749, 2749, 2768, 2768, 2784, 2785, 2821, 2828, 2831, 2832, 2835, 2856, 2858, 2864, 2866, 2867, 2869, 2873, 2877, 2877, 2908, 2909, 2911, 2913, 2929, 2929, 2947, 2947, 2949, 2954, 2958, 2960, 2962, 2965, 2969, 2970, 2972, 2972, 2974, 2975, 2979, 2980, 2984, 2986, 2990, 3001, 3024, 3024, 3077, 3084, 3086, 3088, 3090, 3112, 3114, 3123, 3125, 3129, 3133, 3133, 3160, 3161, 3168, 3169, 3205, 3212, 3214, 3216, 3218, 3240, 3242, 3251, 3253, 3257, 3261, 3261, 3294, 3294, 3296, 3297, 3313, 3314, 3333, 3340, 3342, 3344, 3346, 3386, 3389, 3389, 3406, 3406, 3424, 3425, 3450, 3455, 3461, 3478, 3482, 3505, 3507, 3515, 3517, 3517, 3520, 3526, 3585, 3632, 3634, 3635, 3648, 3654, 3713, 3714, 3716, 3716, 3719, 3720, 3722, 3722, 3725, 3725, 3732, 3735, 3737, 3743, 3745, 3747, 3749, 3749, 3751, 3751, 3754, 3755, 3757, 3760, 3762, 3763, 3773, 3773, 3776, 3780, 3782, 3782, 3804, 3807, 3840, 3840, 3904, 3911, 3913, 3948, 3976, 3980, 4096, 4138, 4159, 4159, 4176, 4181, 4186, 4189, 4193, 4193, 4197, 4198, 4206, 4208, 4213, 4225, 4238, 4238, 4256, 4293, 4295, 4295, 4301, 4301, 4304, 4346, 4348, 4680, 4682, 4685, 4688, 4694, 4696, 4696, 4698, 4701, 4704, 4744, 4746, 4749, 4752, 4784, 4786, 4789, 4792, 4798, 4800, 4800, 4802, 4805, 4808, 4822, 4824, 4880, 4882, 4885, 4888, 4954, 4992, 5007, 5024, 5108, 5121, 5740, 5743, 5759, 5761, 5786, 5792, 5866, 5870, 5872, 5888, 5900, 5902, 5905, 5920, 5937, 5952, 5969, 5984, 5996, 5998, 6000, 6016, 6067, 6103, 6103, 6108, 6108, 6176, 6263, 6272, 6312, 6314, 6314, 6320, 6389, 6400, 6428, 6480, 6509, 6512, 6516, 6528, 6571, 6593, 6599, 6656, 6678, 6688, 6740, 6823, 6823, 6917, 6963, 6981, 6987, 7043, 7072, 7086, 7087, 7098, 7141, 7168, 7203, 7245, 7247, 7258, 7293, 7401, 7404, 7406, 7409, 7413, 7414, 7424, 7615, 7680, 7957, 7960, 7965, 7968, 8005, 8008, 8013, 8016, 8023, 8025, 8025, 8027, 8027, 8029, 8029, 8031, 8061, 8064, 8116, 8118, 8124, 8126, 8126, 8130, 8132, 8134, 8140, 8144, 8147, 8150, 8155, 8160, 8172, 8178, 8180, 8182, 8188, 8305, 8305, 8319, 8319, 8336, 8348, 8450, 8450, 8455, 8455, 8458, 8467, 8469, 8469, 8473, 8477, 8484, 8484, 8486, 8486, 8488, 8488, 8490, 8493, 8495, 8505, 8508, 8511, 8517, 8521, 8526, 8526, 8544, 8584, 11264, 11310, 11312, 11358, 11360, 11492, 11499, 11502, 11506, 11507, 11520, 11557, 11559, 11559, 11565, 11565, 11568, 11623, 11631, 11631, 11648, 11670, 11680, 11686, 11688, 11694, 11696, 11702, 11704, 11710, 11712, 11718, 11720, 11726, 11728, 11734, 11736, 11742, 11823, 11823, 12293, 12295, 12321, 12329, 12337, 12341, 12344, 12348, 12353, 12438, 12445, 12447, 12449, 12538, 12540, 12543, 12549, 12589, 12593, 12686, 12704, 12730, 12784, 12799, 13312, 19893, 19968, 40908, 40960, 42124, 42192, 42237, 42240, 42508, 42512, 42527, 42538, 42539, 42560, 42606, 42623, 42647, 42656, 42735, 42775, 42783, 42786, 42888, 42891, 42894, 42896, 42899, 42912, 42922, 43000, 43009, 43011, 43013, 43015, 43018, 43020, 43042, 43072, 43123, 43138, 43187, 43250, 43255, 43259, 43259, 43274, 43301, 43312, 43334, 43360, 43388, 43396, 43442, 43471, 43471, 43520, 43560, 43584, 43586, 43588, 43595, 43616, 43638, 43642, 43642, 43648, 43695, 43697, 43697, 43701, 43702, 43705, 43709, 43712, 43712, 43714, 43714, 43739, 43741, 43744, 43754, 43762, 43764, 43777, 43782, 43785, 43790, 43793, 43798, 43808, 43814, 43816, 43822, 43968, 44002, 44032, 55203, 55216, 55238, 55243, 55291, 63744, 64109, 64112, 64217, 64256, 64262, 64275, 64279, 64285, 64285, 64287, 64296, 64298, 64310, 64312, 64316, 64318, 64318, 64320, 64321, 64323, 64324, 64326, 64433, 64467, 64829, 64848, 64911, 64914, 64967, 65008, 65019, 65136, 65140, 65142, 65276, 65313, 65338, 65345, 65370, 65382, 65470, 65474, 65479, 65482, 65487, 65490, 65495, 65498, 65500,];\r\nconst unicodeES5IdentifierPart = [170, 170, 181, 181, 186, 186, 192, 214, 216, 246, 248, 705, 710, 721, 736, 740, 748, 748, 750, 750, 768, 884, 886, 887, 890, 893, 902, 902, 904, 906, 908, 908, 910, 929, 931, 1013, 1015, 1153, 1155, 1159, 1162, 1319, 1329, 1366, 1369, 1369, 1377, 1415, 1425, 1469, 1471, 1471, 1473, 1474, 1476, 1477, 1479, 1479, 1488, 1514, 1520, 1522, 1552, 1562, 1568, 1641, 1646, 1747, 1749, 1756, 1759, 1768, 1770, 1788, 1791, 1791, 1808, 1866, 1869, 1969, 1984, 2037, 2042, 2042, 2048, 2093, 2112, 2139, 2208, 2208, 2210, 2220, 2276, 2302, 2304, 2403, 2406, 2415, 2417, 2423, 2425, 2431, 2433, 2435, 2437, 2444, 2447, 2448, 2451, 2472, 2474, 2480, 2482, 2482, 2486, 2489, 2492, 2500, 2503, 2504, 2507, 2510, 2519, 2519, 2524, 2525, 2527, 2531, 2534, 2545, 2561, 2563, 2565, 2570, 2575, 2576, 2579, 2600, 2602, 2608, 2610, 2611, 2613, 2614, 2616, 2617, 2620, 2620, 2622, 2626, 2631, 2632, 2635, 2637, 2641, 2641, 2649, 2652, 2654, 2654, 2662, 2677, 2689, 2691, 2693, 2701, 2703, 2705, 2707, 2728, 2730, 2736, 2738, 2739, 2741, 2745, 2748, 2757, 2759, 2761, 2763, 2765, 2768, 2768, 2784, 2787, 2790, 2799, 2817, 2819, 2821, 2828, 2831, 2832, 2835, 2856, 2858, 2864, 2866, 2867, 2869, 2873, 2876, 2884, 2887, 2888, 2891, 2893, 2902, 2903, 2908, 2909, 2911, 2915, 2918, 2927, 2929, 2929, 2946, 2947, 2949, 2954, 2958, 2960, 2962, 2965, 2969, 2970, 2972, 2972, 2974, 2975, 2979, 2980, 2984, 2986, 2990, 3001, 3006, 3010, 3014, 3016, 3018, 3021, 3024, 3024, 3031, 3031, 3046, 3055, 3073, 3075, 3077, 3084, 3086, 3088, 3090, 3112, 3114, 3123, 3125, 3129, 3133, 3140, 3142, 3144, 3146, 3149, 3157, 3158, 3160, 3161, 3168, 3171, 3174, 3183, 3202, 3203, 3205, 3212, 3214, 3216, 3218, 3240, 3242, 3251, 3253, 3257, 3260, 3268, 3270, 3272, 3274, 3277, 3285, 3286, 3294, 3294, 3296, 3299, 3302, 3311, 3313, 3314, 3330, 3331, 3333, 3340, 3342, 3344, 3346, 3386, 3389, 3396, 3398, 3400, 3402, 3406, 3415, 3415, 3424, 3427, 3430, 3439, 3450, 3455, 3458, 3459, 3461, 3478, 3482, 3505, 3507, 3515, 3517, 3517, 3520, 3526, 3530, 3530, 3535, 3540, 3542, 3542, 3544, 3551, 3570, 3571, 3585, 3642, 3648, 3662, 3664, 3673, 3713, 3714, 3716, 3716, 3719, 3720, 3722, 3722, 3725, 3725, 3732, 3735, 3737, 3743, 3745, 3747, 3749, 3749, 3751, 3751, 3754, 3755, 3757, 3769, 3771, 3773, 3776, 3780, 3782, 3782, 3784, 3789, 3792, 3801, 3804, 3807, 3840, 3840, 3864, 3865, 3872, 3881, 3893, 3893, 3895, 3895, 3897, 3897, 3902, 3911, 3913, 3948, 3953, 3972, 3974, 3991, 3993, 4028, 4038, 4038, 4096, 4169, 4176, 4253, 4256, 4293, 4295, 4295, 4301, 4301, 4304, 4346, 4348, 4680, 4682, 4685, 4688, 4694, 4696, 4696, 4698, 4701, 4704, 4744, 4746, 4749, 4752, 4784, 4786, 4789, 4792, 4798, 4800, 4800, 4802, 4805, 4808, 4822, 4824, 4880, 4882, 4885, 4888, 4954, 4957, 4959, 4992, 5007, 5024, 5108, 5121, 5740, 5743, 5759, 5761, 5786, 5792, 5866, 5870, 5872, 5888, 5900, 5902, 5908, 5920, 5940, 5952, 5971, 5984, 5996, 5998, 6000, 6002, 6003, 6016, 6099, 6103, 6103, 6108, 6109, 6112, 6121, 6155, 6157, 6160, 6169, 6176, 6263, 6272, 6314, 6320, 6389, 6400, 6428, 6432, 6443, 6448, 6459, 6470, 6509, 6512, 6516, 6528, 6571, 6576, 6601, 6608, 6617, 6656, 6683, 6688, 6750, 6752, 6780, 6783, 6793, 6800, 6809, 6823, 6823, 6912, 6987, 6992, 7001, 7019, 7027, 7040, 7155, 7168, 7223, 7232, 7241, 7245, 7293, 7376, 7378, 7380, 7414, 7424, 7654, 7676, 7957, 7960, 7965, 7968, 8005, 8008, 8013, 8016, 8023, 8025, 8025, 8027, 8027, 8029, 8029, 8031, 8061, 8064, 8116, 8118, 8124, 8126, 8126, 8130, 8132, 8134, 8140, 8144, 8147, 8150, 8155, 8160, 8172, 8178, 8180, 8182, 8188, 8204, 8205, 8255, 8256, 8276, 8276, 8305, 8305, 8319, 8319, 8336, 8348, 8400, 8412, 8417, 8417, 8421, 8432, 8450, 8450, 8455, 8455, 8458, 8467, 8469, 8469, 8473, 8477, 8484, 8484, 8486, 8486, 8488, 8488, 8490, 8493, 8495, 8505, 8508, 8511, 8517, 8521, 8526, 8526, 8544, 8584, 11264, 11310, 11312, 11358, 11360, 11492, 11499, 11507, 11520, 11557, 11559, 11559, 11565, 11565, 11568, 11623, 11631, 11631, 11647, 11670, 11680, 11686, 11688, 11694, 11696, 11702, 11704, 11710, 11712, 11718, 11720, 11726, 11728, 11734, 11736, 11742, 11744, 11775, 11823, 11823, 12293, 12295, 12321, 12335, 12337, 12341, 12344, 12348, 12353, 12438, 12441, 12442, 12445, 12447, 12449, 12538, 12540, 12543, 12549, 12589, 12593, 12686, 12704, 12730, 12784, 12799, 13312, 19893, 19968, 40908, 40960, 42124, 42192, 42237, 42240, 42508, 42512, 42539, 42560, 42607, 42612, 42621, 42623, 42647, 42655, 42737, 42775, 42783, 42786, 42888, 42891, 42894, 42896, 42899, 42912, 42922, 43000, 43047, 43072, 43123, 43136, 43204, 43216, 43225, 43232, 43255, 43259, 43259, 43264, 43309, 43312, 43347, 43360, 43388, 43392, 43456, 43471, 43481, 43520, 43574, 43584, 43597, 43600, 43609, 43616, 43638, 43642, 43643, 43648, 43714, 43739, 43741, 43744, 43759, 43762, 43766, 43777, 43782, 43785, 43790, 43793, 43798, 43808, 43814, 43816, 43822, 43968, 44010, 44012, 44013, 44016, 44025, 44032, 55203, 55216, 55238, 55243, 55291, 63744, 64109, 64112, 64217, 64256, 64262, 64275, 64279, 64285, 64296, 64298, 64310, 64312, 64316, 64318, 64318, 64320, 64321, 64323, 64324, 64326, 64433, 64467, 64829, 64848, 64911, 64914, 64967, 65008, 65019, 65024, 65039, 65056, 65062, 65075, 65076, 65101, 65103, 65136, 65140, 65142, 65276, 65296, 65305, 65313, 65338, 65343, 65343, 65345, 65370, 65382, 65470, 65474, 65479, 65482, 65487, 65490, 65495, 65498, 65500,];\r\nconst reservedWords = [\"abstract\", \"any\", \"as\", \"break\",\r\n    \"case\", \"catch\", \"class\", \"continue\", \"const\", \"constructor\", \"debugger\",\r\n    \"declare\", \"default\", \"delete\", \"do\", \"else\", \"enum\", \"export\", \"extends\",\r\n    \"false\", \"finally\", \"for\", \"from\", \"function\", \"get\", \"if\", \"implements\",\r\n    \"import\", \"in\", \"instanceof\", \"interface\", \"is\", \"let\", \"module\", \"namespace\",\r\n    \"new\", \"null\", \"package\", \"private\", \"protected\", \"public\",\r\n    \"require\", \"global\", \"return\", \"set\", \"static\", \"super\", \"switch\",\r\n    \"symbol\", \"this\", \"throw\", \"true\", \"try\", \"type\", \"typeof\", \"var\", \"void\",\r\n    \"while\", \"with\", \"yield\", \"async\", \"await\", \"of\", \"Math\"];\r\n\r\n\r\nexport function escapeIdentifier(name: string): string {\r\n    if (!name) return '_';\r\n\r\n    let n = name.trim().replace(/\\s+/g, \"_\").replace(/[^a-zA-Z0-9_$]/g, a =>\r\n        isIdentifierPart(a.charCodeAt(0)) ? a : \"\");\r\n\r\n    if (n.length === 0 || reservedWords.indexOf(n) !== -1 || !isIdentifierStart(n.charAt(0))) {\r\n        n = \"_\" + n;\r\n    }\r\n\r\n    return n;\r\n}\r\n\r\nfunction isIdentifierPart(charCode: number) {\r\n    return lookupInUnicodeMap(charCode, unicodeES5IdentifierPart);\r\n}\r\n\r\nfunction isIdentifierStart(char: string) {\r\n    if (/[a-zA-Z_$]/.test(char)) return true;\r\n    return lookupInUnicodeMap(char.charCodeAt(0), unicodeES5IdentifierStart);\r\n}\r\n\r\nfunction lookupInUnicodeMap(code: number, map: number[]): boolean {\r\n    // Bail out quickly if it couldn't possibly be in the map.\r\n    if (code < map[0]) {\r\n        return false;\r\n    }\r\n\r\n    // Perform binary search in one of the Unicode range maps\r\n    let lo = 0;\r\n    let hi: number = map.length;\r\n    let mid: number;\r\n\r\n    while (lo + 1 < hi) {\r\n        mid = lo + (hi - lo) / 2;\r\n        // mid has to be even to catch a range's beginning\r\n        mid -= mid % 2;\r\n        if (map[mid] <= code && code <= map[mid + 1]) {\r\n            return true;\r\n        }\r\n\r\n        if (code < map[mid]) {\r\n            hi = mid;\r\n        }\r\n        else {\r\n            lo = mid + 2;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n","import { uint8ArrayToString, hexToUint8Array } from \"./util\";\r\n\r\nexport interface JRESImage {\r\n    data: string; // Base64 encoded string of f4 encoded bytes\r\n    previewURI: string; // PNG data uri\r\n    width: number;\r\n    height: number;\r\n\r\n    qualifiedName?: string;\r\n    tilemapTile?: boolean;\r\n    sourceFile?: string;\r\n}\r\n\r\nexport interface ImageInfo {\r\n    width: number;\r\n    height: number;\r\n    pixels: Uint8ClampedArray;\r\n}\r\n\r\nexport async function getImageFromURIAsync(uri: string): Promise<ImageInfo | null> {\r\n    const loaded = await loadImageAsync(uri);\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = loaded.width;\r\n    canvas.height = loaded.height;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (!ctx) return null;\r\n\r\n    ctx.drawImage(loaded, 0, 0);\r\n    const data = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n    return {\r\n        width: data.width,\r\n        height: data.height,\r\n        pixels: data.data\r\n    };\r\n}\r\n\r\nasync function loadImageAsync(uri: string): Promise<HTMLImageElement> {\r\n    return new Promise<HTMLImageElement>(resolve => {\r\n        const el = document.createElement(\"img\");\r\n        el.src = uri\r\n        el.onload = () => {\r\n            resolve(el)\r\n        };\r\n    })\r\n}\r\n\r\nexport async function getJRESImageFromUint8Array(buf: Uint8Array, palette: string[]): Promise<JRESImage | null> {\r\n    const encoded = btoa(uint8ArrayToString(buf));\r\n    const imageInfo = await getImageFromURIAsync(\"data:image/png;base64,\" + encoded);\r\n    if (imageInfo) {\r\n        const imageLit = imgEncodeImage(imageInfo, palette);\r\n        return await getJRESImageFromImageLiteral(imageLit, palette);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function getJRESImageFromDataString(data: string, palette: string[], qname?: string, tilemapTile?: boolean, sourceFile?: string): JRESImage {\r\n    const bitmap = jresDataToBitmap(data);\r\n\r\n    return getJRESImage(bitmap, palette, data, qname, tilemapTile, sourceFile)\r\n}\r\n\r\nexport function getJRESImageFromImageLiteral(literal: string, palette: string[], sourceFile?: string) {\r\n    const bitmap = imageLiteralToBitmap(literal);\r\n    return getJRESImage(bitmap, palette, undefined, undefined, undefined, sourceFile)\r\n}\r\n\r\n\r\nfunction getJRESImage(bitmap: Bitmap, palette: string[], data?: string, qname?: string, tilemapTile?: boolean, sourceFile?: string): JRESImage {\r\n    return {\r\n        width: bitmap.width,\r\n        height: bitmap.height,\r\n        data: data || base64EncodeBitmap(bitmap),\r\n        previewURI: bitmapToImageURI(bitmap, palette),\r\n        qualifiedName: qname,\r\n        tilemapTile,\r\n        sourceFile\r\n    }\r\n}\r\n\r\nexport function imgEncodeJRESImage(image: JRESImage) {\r\n    const bitmap = jresDataToBitmap(image.data);\r\n    return bitmapToImageLiteral(bitmap, \"typescript\");\r\n}\r\n\r\n\r\nconst hexChars = [\".\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n\r\nfunction bitmapToImageLiteral(bitmap: Bitmap, fileType: \"typescript\" | \"python\"): string {\r\n    let res = '';\r\n    switch (fileType) {\r\n        case \"python\":\r\n            res = \"img(\\\"\\\"\\\"\";\r\n            break;\r\n        default:\r\n            res = \"img`\";\r\n            break;\r\n    }\r\n\r\n    if (bitmap) {\r\n        for (let r = 0; r < bitmap.height; r++) {\r\n            res += \"\\n\"\r\n            for (let c = 0; c < bitmap.width; c++) {\r\n                res += hexChars[bitmap.get(c, r)] + \" \";\r\n            }\r\n        }\r\n    }\r\n\r\n    res += \"\\n\";\r\n\r\n    switch (fileType) {\r\n        case \"python\":\r\n            res += \"\\\"\\\"\\\")\";\r\n            break;\r\n        default:\r\n            res += \"`\";\r\n            break;\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\n\r\n/**\r\n * Encodes the image in the image/mkcd-f4 format (used for the data attribute in jres files)\r\n * @param image\r\n * @param colors\r\n */\r\nexport function f4EncodeImage(image: ImageInfo, colors: string[]) {\r\n    const palette = colorsToNumbers(colors);\r\n\r\n    return f4EncodeImgCore(image.width, image.height, 4, (x, y) => {\r\n        const index = y * image.width + x;\r\n        return closestColor(image.pixels, index << 2, palette);\r\n    });\r\n}\r\n\r\n/**\r\n * Encodes the image as an img`` literal\r\n * @param image\r\n * @param colors\r\n */\r\nexport function imgEncodeImage(image: ImageInfo, colors: string[]) {\r\n    const palette = colorsToNumbers(colors);\r\n\r\n    return imgEncodeImgCore(image.width, image.height, (x, y) => {\r\n        const index = y * image.width + x;\r\n        return closestColor(image.pixels, index << 2, palette);\r\n    });\r\n}\r\n\r\nfunction colorsToNumbers(colors: string[]): number[][] {\r\n    const res: number[][] = [];\r\n    for (let i = 0; i < colors.length; i++) {\r\n        const color = parseColorString(colors[i]);\r\n        res.push([_r(color), _g(color), _b(color)]);\r\n    }\r\n    return res;\r\n}\r\n\r\n// use geometric distance on colors\r\nfunction scale(v: number) {\r\n    return v * v\r\n}\r\n\r\nfunction closestColor(buf: Uint8ClampedArray, pix: number, palette: number[][], alpha = true) {\r\n    if (alpha && buf[pix + 3] < 100)\r\n        return 0 // transparent\r\n    let mindelta = 0\r\n    let idx = -1\r\n    for (let i = alpha ? 1 : 0; i < palette.length; ++i) {\r\n        let delta = scale(palette[i][0] - buf[pix + 0]) + scale(palette[i][1] - buf[pix + 1]) + scale(palette[i][2] - buf[pix + 2])\r\n        if (idx < 0 || delta < mindelta) {\r\n            idx = i\r\n            mindelta = delta\r\n        }\r\n    }\r\n    return idx\r\n}\r\n\r\nfunction f4EncodeImgCore(w: number, h: number, bpp: number, getPix: (x: number, y: number) => number) {\r\n    let r = hex2(0xe0 | bpp) + hex2(w) + hex2(h) + \"00\"\r\n    let ptr = 4\r\n    let curr = 0\r\n    let shift = 0\r\n\r\n    let pushBits = (n: number) => {\r\n        curr |= n << shift\r\n        // eslint-disable-next-line\r\n        if (shift == 8 - bpp) {\r\n            r += hex2(curr)\r\n            ptr++\r\n            curr = 0\r\n            shift = 0\r\n        } else {\r\n            shift += bpp\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < w; ++i) {\r\n        for (let j = 0; j < h; ++j)\r\n            pushBits(getPix(i, j))\r\n        // eslint-disable-next-line\r\n        while (shift != 0)\r\n            pushBits(0)\r\n        if (bpp > 1) {\r\n            while (ptr & 3)\r\n                pushBits(0)\r\n        }\r\n    }\r\n\r\n    return r\r\n\r\n    function hex2(n: number) {\r\n        return (\"0\" + n.toString(16)).slice(-2)\r\n    }\r\n}\r\n\r\nfunction imgEncodeImgCore(w: number, h: number, getPix: (x: number, y: number) => number) {\r\n    let res = \"img`\\n    \"\r\n    for (let r = 0; r < h; r++) {\r\n        let row: number[] = []\r\n        for (let c = 0; c < w; c++) {\r\n            row.push(getPix(c, r));\r\n        }\r\n        res += row.map(n => n.toString(16)).join(\" \");\r\n        res += \"\\n    \"\r\n    }\r\n    res += \"`\";\r\n    return res;\r\n}\r\n\r\nfunction base64EncodeBitmap(bitmap: Bitmap) {\r\n    const hex = f4EncodeImgCore(bitmap.width, bitmap.height, 4, (x, y) => bitmap.get(x, y));\r\n    return btoa(uint8ArrayToString(hexToUint8Array(hex)))\r\n}\r\n\r\nfunction _r(color: number) { return (color >> 16) & 0xff }\r\nfunction _g(color: number) { return (color >> 8) & 0xff }\r\nfunction _b(color: number) { return color & 0xff }\r\n\r\nfunction parseColorString(color: string) {\r\n    if (color) {\r\n        if (color.length === 6) {\r\n            return parseInt(\"0x\" + color);\r\n        }\r\n        else if (color.length === 7) {\r\n            return parseInt(\"0x\" + color.substr(1));\r\n        }\r\n    }\r\n    return 0;\r\n}\r\n\r\n/**\r\n * 16-color sprite\r\n */\r\nexport class Bitmap {\r\n    protected buf: Uint8ClampedArray;\r\n\r\n    constructor(public width: number, public height: number, public x0 = 0, public y0 = 0, buf?: Uint8ClampedArray) {\r\n        this.buf = buf || new Uint8ClampedArray(this.dataLength());\r\n    }\r\n\r\n    set(col: number, row: number, value: number) {\r\n        if (col < this.width && row < this.height && col >= 0 && row >= 0) {\r\n            const index = this.coordToIndex(col, row);\r\n            this.setCore(index, value);\r\n        }\r\n    }\r\n\r\n    get(col: number, row: number) {\r\n        if (col < this.width && row < this.height && col >= 0 && row >= 0) {\r\n            const index = this.coordToIndex(col, row);\r\n            return this.getCore(index);\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    protected coordToIndex(col: number, row: number) {\r\n        return col + row * this.width;\r\n    }\r\n\r\n    protected getCore(index: number) {\r\n        const cell = Math.floor(index / 2);\r\n        if (index % 2 === 0) {\r\n            return this.buf[cell] & 0xf;\r\n        }\r\n        else {\r\n            return (this.buf[cell] & 0xf0) >> 4;\r\n        }\r\n    }\r\n\r\n    protected setCore(index: number, value: number) {\r\n        const cell = Math.floor(index / 2);\r\n        if (index % 2 === 0) {\r\n            this.buf[cell] = (this.buf[cell] & 0xf0) | (value & 0xf);\r\n        }\r\n        else {\r\n            this.buf[cell] = (this.buf[cell] & 0x0f) | ((value & 0xf) << 4);\r\n        }\r\n    }\r\n\r\n    protected dataLength() {\r\n        return Math.ceil(this.width * this.height / 2);\r\n    }\r\n}\r\n\r\n\r\nfunction jresDataToBitmap(jresURL: string) {\r\n    let data = atob(jresURL.slice(jresURL.indexOf(\",\") + 1))\r\n    let magic = data.charCodeAt(0);\r\n    let w = data.charCodeAt(1);\r\n    let h = data.charCodeAt(2);\r\n\r\n    if (magic === 0x87) {\r\n        magic = 0xe0 | data.charCodeAt(1);\r\n        w = data.charCodeAt(2) | (data.charCodeAt(3) << 8);\r\n        h = data.charCodeAt(4) | (data.charCodeAt(5) << 8);\r\n        data = data.slice(4);\r\n    }\r\n\r\n    const out = new Bitmap(w, h);\r\n\r\n    let index = 4\r\n    if (magic === 0xe1) {\r\n        // Monochrome\r\n        let mask = 0x01\r\n        let v = data.charCodeAt(index++)\r\n        for (let x = 0; x < w; ++x) {\r\n            for (let y = 0; y < h; ++y) {\r\n                out.set(x, y, (v & mask) ? 1 : 0);\r\n                mask <<= 1\r\n                // eslint-disable-next-line\r\n                if (mask == 0x100) {\r\n                    mask = 0x01\r\n                    v = data.charCodeAt(index++)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // Color\r\n        for (let x = 0; x < w; x++) {\r\n            for (let y = 0; y < h; y += 2) {\r\n                let v = data.charCodeAt(index++)\r\n                out.set(x, y, v & 0xf);\r\n                // eslint-disable-next-line\r\n                if (y != h - 1) {\r\n                    out.set(x, y + 1, (v >> 4) & 0xf);\r\n                }\r\n            }\r\n            while (index & 3) index++\r\n        }\r\n    }\r\n\r\n    return out;\r\n}\r\n\r\nfunction imageLiteralToBitmap(text: string, defaultPattern?: string): Bitmap {\r\n    // Strip the tagged template string business and the whitespace. We don't have to exhaustively\r\n    // replace encoded characters because the compiler will catch any disallowed characters and throw\r\n    // an error before the decompilation happens. 96 is backtick and 9 is tab\r\n    text = text.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g, \"\").trim();\r\n    // eslint-disable-next-line\r\n    text = text.replace(/^[\"`\\(\\)]*/, '').replace(/[\"`\\(\\)]*$/, '');\r\n    text = text.replace(/&#10;/g, \"\\n\");\r\n\r\n    if (!text && defaultPattern)\r\n        text = defaultPattern;\r\n\r\n    const rows = text.split(\"\\n\");\r\n\r\n    // We support \"ragged\" sprites so not all rows will be the same length\r\n    const sprite: number[][] = [];\r\n    let spriteWidth = 0;\r\n\r\n    for (let r = 0; r < rows.length; r++) {\r\n        const row = rows[r];\r\n        const rowValues: number[] = [];\r\n        for (let c = 0; c < row.length; c++) {\r\n            // This list comes from libs/screen/targetOverrides.ts in pxt-arcade\r\n            // Technically, this could change per target.\r\n            switch (row[c]) {\r\n                case \"0\": case \".\": rowValues.push(0); break;\r\n                case \"1\": case \"#\": rowValues.push(1); break;\r\n                case \"2\": case \"T\": rowValues.push(2); break;\r\n                case \"3\": case \"t\": rowValues.push(3); break;\r\n                case \"4\": case \"N\": rowValues.push(4); break;\r\n                case \"5\": case \"n\": rowValues.push(5); break;\r\n                case \"6\": case \"G\": rowValues.push(6); break;\r\n                case \"7\": case \"g\": rowValues.push(7); break;\r\n                case \"8\": rowValues.push(8); break;\r\n                case \"9\": rowValues.push(9); break;\r\n                case \"a\": case \"A\": case \"R\": rowValues.push(10); break;\r\n                case \"b\": case \"B\": case \"P\": rowValues.push(11); break;\r\n                case \"c\": case \"C\": case \"p\": rowValues.push(12); break;\r\n                case \"d\": case \"D\": case \"O\": rowValues.push(13); break;\r\n                case \"e\": case \"E\": case \"Y\": rowValues.push(14); break;\r\n                case \"f\": case \"F\": case \"W\": rowValues.push(15); break;\r\n            }\r\n        }\r\n\r\n        if (rowValues.length) {\r\n            sprite.push(rowValues);\r\n            spriteWidth = Math.max(spriteWidth, rowValues.length);\r\n        }\r\n    }\r\n\r\n    const spriteHeight = sprite.length;\r\n\r\n    const result = new Bitmap(spriteWidth, spriteHeight)\r\n\r\n    for (let r = 0; r < spriteHeight; r++) {\r\n        const row = sprite[r];\r\n        for (let c = 0; c < spriteWidth; c++) {\r\n            if (c < row.length) {\r\n                result.set(c, r, row[c]);\r\n            }\r\n            else {\r\n                result.set(c, r, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\n/**\r\n * Converts a bitmap into a square image suitable for display\r\n */\r\nfunction bitmapToImageURI(frame: Bitmap, colors: string[]) {\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = frame.width;\r\n    canvas.height = frame.height;\r\n\r\n    let context = canvas.getContext(\"2d\");\r\n\r\n    if (context) {\r\n        for (let c = 0; c < frame.width; c++) {\r\n            for (let r = 0; r < frame.height; r++) {\r\n                const color = frame.get(c, r);\r\n\r\n                if (color) {\r\n                    context.fillStyle = colors[color];\r\n                    context.fillRect(c, r, 1, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return canvas.toDataURL();\r\n}\r\n\r\n","export const ignoredValues = [\r\n    `\"- - - - - - - - \"`, `Projectile`, `Food`, `Enemy`, `mySprite`, `Player`, `mySprite2`, `Sprite.x`, `effects.spray`,\r\n    `false`, `animation.flyToCenter`, `ADD`, `min`, `max`, `round`, `ceil`, `floor`, `trunc`, `Sprite.x`, `Sprite.y`,\r\n    `Sprite.vx`, `MINUS`, `MULTIPLY`, `DIVIDE`, `POWER`, `sqrt`, `sin`, `cos`, `tan`, `atan2`, `idiv`, `imul`,\r\n    `TRUE`, `AND`, `OR`, `FALSE`, `TileDirection.Left`, `TileDirection.Bottom`, `TileDirection.Right`, `TileDirection.Top`,\r\n    `TileDirection.Center`, `animation.AnimationTypes.All`, `animation.AnimationTypes.ImageAnimation`,\r\n    `animation.AnimationTypes.MovementAnimation`, `list`, `Sprite.vy`, `Sprite.ax`, `Sprite.ay`, `Sprite.fx`, `Sprite.fy`,\r\n    `Sprite.lifespan`, `Sprite.width`, `Sprite.height`, `Sprite.left`, `Sprite.right`, `Sprite.top`, `Sprite.bottom`, `Sprite.z`,\r\n    `SpriteFlag.AutoDestroy`, `SpriteFlag.Ghost`, `SpriteFlag.StayInScreen`, `SpriteFlag.DestroyOnWall`, `SpriteFlag.BounceOnWall`,\r\n    `SpriteFlag.ShowPhysics`, `SpriteFlag.Invisible`, `SpriteFlag.RelativeToCamera`, `SpriteFlag.GhostThroughSprites`,\r\n    `SpriteFlag.GhostThroughTiles`, `SpriteFlag.GhostThroughWalls`, `controller.right`, `ControllerButtonEvent.Released`,\r\n    `controller.A`, `ControllerButtonEvent.Pressed`, `controller.down`, `ControllerButtonEvent.Repeated`, `controller.B`,\r\n    `controller.menu`, `controller.left`, `controller.anyButton`, `controller.up`, `sprite`, `sprites.castle.tileGrass2`,\r\n    `location`, `controller.player2`, `ControllerEvent.Disconnected`, `info.player2`, `controller.player3`, `ControllerEvent.Connected`,\r\n    `info.player3`, `info.player4`, `controller.player4`, `music.wawawawaa`, `music.baDing`, `music.jumpUp`, `music.jumpDown`,\r\n    `music.sonar`, `music.spooky`, `music.beamUp`, `music.smallCrash`, `music.bigCrash`, `music.zapped`, `music.buzzer`,\r\n    `music.powerUp`, `music.powerDown`, `music.magicWand`, `music.siren`, `music.pewPew`, `music.knock`, `music.footstep`,\r\n    `music.thump`, `controller.player1`, `info.player1`, \"EQ\", \"GT\", \"LT\", \"GTE\", \"LTE\", \"NEQ\", \"true\", \"false\",\r\n    \"sprites.food.bigBurger\", \"sprites.food.bigDrumstick\", \"sprites.food.bigHam\", \"sprites.food.bigPizza\", \"sprites.food.bigTaco\", \"sprites.food.bigCake\", \"sprites.food.bigDonut\", \"sprites.food.bigIceCream\", \"sprites.food.plate\", \"sprites.builtin.angelFish0\", \"sprites.builtin.angelFish1\", \"sprites.builtin.angelFish2\", \"sprites.builtin.angelFish3\", \"sprites.builtin.aquaticBackground\", \"sprites.builtin.bed0\", \"sprites.builtin.bed1\", \"sprites.builtin.bed2\", \"sprites.builtin.brick\", \"sprites.builtin.cat0\", \"sprites.builtin.cat1\", \"sprites.builtin.cat2\", \"sprites.builtin.clam0\", \"sprites.builtin.clam1\", \"sprites.builtin.clam2\", \"sprites.builtin.clownFish0\", \"sprites.builtin.clownFish1\", \"sprites.builtin.clownFish2\", \"sprites.builtin.clownFish3\", \"sprites.builtin.coin0\", \"sprites.builtin.coin1\", \"sprites.builtin.coin2\", \"sprites.builtin.coin3\", \"sprites.builtin.coin4\", \"sprites.builtin.coin5\", \"sprites.builtin.computer0\", \"sprites.builtin.computer1\", \"sprites.builtin.console\", \"sprites.builtin.coral0\", \"sprites.builtin.coral1\", \"sprites.builtin.coral2\", \"sprites.builtin.coral3\", \"sprites.builtin.coral4\", \"sprites.builtin.coral5\", \"sprites.builtin.couchFront0\", \"sprites.builtin.couchFront1\", \"sprites.builtin.couchSide0\", \"sprites.builtin.couchSide1\", \"sprites.builtin.couchSide2\", \"sprites.builtin.crowd0\", \"sprites.builtin.crowd1\", \"sprites.builtin.crowd2\", \"sprites.builtin.crowd3\", \"sprites.builtin.crowd4\", \"sprites.builtin.crowd5\", \"sprites.builtin.crowd6\", \"sprites.builtin.crowd7\", \"sprites.builtin.crowd8\", \"sprites.builtin.crowd9\", \"sprites.builtin.dog0\", \"sprites.builtin.dog1\", \"sprites.builtin.dog2\", \"sprites.builtin.field0\", \"sprites.builtin.field1\", \"sprites.builtin.fieldGoal\", \"sprites.builtin.football1\", \"sprites.builtin.football2\", \"sprites.builtin.football3\", \"sprites.builtin.football4\", \"sprites.builtin.football6\", \"sprites.builtin.football7\", \"sprites.builtin.footballPlayer0\", \"sprites.builtin.footballPlayer1\", \"sprites.builtin.footballPlayer2\", \"sprites.builtin.footballPlayer3\", \"sprites.builtin.footballPlayer4\", \"sprites.builtin.footballPlayer5\", \"sprites.builtin.footballPlayer6\", \"sprites.builtin.footballPlayer7\", \"sprites.builtin.forestBackground\", \"sprites.builtin.forestBat0\", \"sprites.builtin.forestBat1\", \"sprites.builtin.forestBat2\", \"sprites.builtin.forestBat3\", \"sprites.builtin.forestBat4\", \"sprites.builtin.forestBat5\", \"sprites.builtin.forestBat6\", \"sprites.builtin.forestBat7\", \"sprites.builtin.forestFlowers0\", \"sprites.builtin.forestFlowers1\", \"sprites.builtin.forestFlowers2\", \"sprites.builtin.forestLargeMushroom0\", \"sprites.builtin.forestLargeMushroom1\", \"sprites.builtin.forestMonkey0\", \"sprites.builtin.forestMonkey1\", \"sprites.builtin.forestMonkey2\", \"sprites.builtin.forestMonkey3\", \"sprites.builtin.forestMonkey4\", \"sprites.builtin.forestMonkey5\", \"sprites.builtin.forestMonkey6\", \"sprites.builtin.forestMonkey7\", \"sprites.builtin.forestMonkey8\", \"sprites.builtin.forestMonkey9\", \"sprites.builtin.forestMonkey10\", \"sprites.builtin.forestMushroomPatch\", \"sprites.builtin.forestScenery0\", \"sprites.builtin.forestScenery1\", \"sprites.builtin.forestScenery2\", \"sprites.builtin.forestScenery3\", \"sprites.builtin.forestSnake0\", \"sprites.builtin.forestSnake1\", \"sprites.builtin.forestSnake2\", \"sprites.builtin.forestSnake3\", \"sprites.builtin.forestSnake4\", \"sprites.builtin.forestSnake5\", \"sprites.builtin.forestSnake6\", \"sprites.builtin.forestSnake7\", \"sprites.builtin.forestTiles0\", \"sprites.builtin.forestTiles1\", \"sprites.builtin.forestTiles2\", \"sprites.builtin.forestTiles3\", \"sprites.builtin.forestTiles4\", \"sprites.builtin.forestTiles5\", \"sprites.builtin.forestTiles6\", \"sprites.builtin.forestTiles7\", \"sprites.builtin.forestTiles8\", \"sprites.builtin.forestTiles9\", \"sprites.builtin.forestTiles10\", \"sprites.builtin.forestTiles11\", \"sprites.builtin.forestTiles12\", \"sprites.builtin.forestTiles13\", \"sprites.builtin.forestTiles14\", \"sprites.builtin.forestTiles15\", \"sprites.builtin.forestTiles16\", \"sprites.builtin.forestTiles17\", \"sprites.builtin.forestTiles18\", \"sprites.builtin.forestTiles19\", \"sprites.builtin.forestTiles20\", \"sprites.builtin.forestTiles21\", \"sprites.builtin.forestTiles22\", \"sprites.builtin.forestTiles23\", \"sprites.builtin.forestTiles24\", \"sprites.builtin.forestTiles25\", \"sprites.builtin.forestTiles26\", \"sprites.builtin.forestTiles27\", \"sprites.builtin.forestTiles28\", \"sprites.builtin.forestTiles29\", \"sprites.builtin.forestTree0\", \"sprites.builtin.forestTree1\", \"sprites.builtin.forestTree2\", \"sprites.builtin.forestTree3\", \"sprites.builtin.forestTreeGroup0\", \"sprites.builtin.forestTreeGroup1\", \"sprites.builtin.forestTreeGroup2\", \"sprites.builtin.forestTreeGroup3\", \"sprites.builtin.forestTreeGroup4\", \"sprites.builtin.furnitureRug\", \"sprites.builtin.furnitureTable1\", \"sprites.builtin.furnitureTable2\", \"sprites.builtin.hermitCrabAttack0\", \"sprites.builtin.hermitCrabAttack1\", \"sprites.builtin.hermitCrabAttack2\", \"sprites.builtin.hermitCrabAttack3\", \"sprites.builtin.hermitCrabAttack4\", \"sprites.builtin.hermitCrabAttack5\", \"sprites.builtin.hermitCrabAwaken0\", \"sprites.builtin.hermitCrabAwaken1\", \"sprites.builtin.hermitCrabAwaken2\", \"sprites.builtin.hermitCrabAwaken3\", \"sprites.builtin.hermitCrabAwaken4\", \"sprites.builtin.hermitCrabAwaken5\", \"sprites.builtin.hermitCrabWalk0\", \"sprites.builtin.hermitCrabWalk1\", \"sprites.builtin.hermitCrabWalk2\", \"sprites.builtin.hermitCrabWalk3\", \"sprites.builtin.largeOceanRock\", \"sprites.builtin.largeShelf\", \"sprites.builtin.mediumOceanRock\", \"sprites.builtin.oceanDepths0\", \"sprites.builtin.oceanDepths1\", \"sprites.builtin.oceanDepths2\", \"sprites.builtin.oceanDepths3\", \"sprites.builtin.oceanDepths4\", \"sprites.builtin.oceanDepths5\", \"sprites.builtin.oceanDepths6\", \"sprites.builtin.oceanDepths7\", \"sprites.builtin.oceanDepths8\", \"sprites.builtin.oceanDepths9\", \"sprites.builtin.oceanDepths10\", \"sprites.builtin.oceanDepths11\", \"sprites.builtin.oceanSand0\", \"sprites.builtin.oceanSand1\", \"sprites.builtin.oceanSand2\", \"sprites.builtin.oceanSand3\", \"sprites.builtin.oceanSand4\", \"sprites.builtin.oceanSand5\", \"sprites.builtin.oceanSand6\", \"sprites.builtin.oceanSand7\", \"sprites.builtin.oceanSand8\", \"sprites.builtin.oceanSand9\", \"sprites.builtin.oceanSand10\", \"sprites.builtin.oceanSand11\", \"sprites.builtin.oceanSand12\", \"sprites.builtin.oceanSand13\", \"sprites.builtin.oceanSand14\", \"sprites.builtin.oceanSand15\", \"sprites.builtin.seaweed0\", \"sprites.builtin.seaweed1\", \"sprites.builtin.seaweed2\", \"sprites.builtin.shark0\", \"sprites.builtin.shark1\", \"sprites.builtin.shark2\", \"sprites.builtin.shark3\", \"sprites.builtin.sharkAttack0\", \"sprites.builtin.sharkAttack1\", \"sprites.builtin.sharkAttack2\", \"sprites.builtin.sharkAttack3\", \"sprites.builtin.sharkAttack4\", \"sprites.builtin.sharkAttack5\", \"sprites.builtin.smallOceanRock\", \"sprites.builtin.smallShelf0\", \"sprites.builtin.smallShelf1\", \"sprites.builtin.smallShelf2\", \"sprites.builtin.tv\", \"sprites.builtin.villager1WalkFront1\", \"sprites.builtin.villager1WalkFront2\", \"sprites.builtin.villager1WalkFront3\", \"sprites.builtin.villager1WalkBack1\", \"sprites.builtin.villager1WalkBack2\", \"sprites.builtin.villager1WalkBack3\", \"sprites.builtin.villager1WalkLeft1\", \"sprites.builtin.villager1WalkLeft2\", \"sprites.builtin.villager1WalkLeft3\", \"sprites.builtin.villager1WalkRight1\", \"sprites.builtin.villager1WalkRight2\", \"sprites.builtin.villager1WalkRight3\", \"sprites.builtin.villager2WalkFront1\", \"sprites.builtin.villager2WalkFront2\", \"sprites.builtin.villager2WalkFront3\", \"sprites.builtin.villager2WalkBack1\", \"sprites.builtin.villager2WalkBack2\", \"sprites.builtin.villager2WalkBack3\", \"sprites.builtin.villager2WalkLeft1\", \"sprites.builtin.villager2WalkLeft2\", \"sprites.builtin.villager2WalkLeft3\", \"sprites.builtin.villager2WalkRight1\", \"sprites.builtin.villager2WalkRight2\", \"sprites.builtin.villager2WalkRight3\", \"sprites.builtin.villager3WalkFront1\", \"sprites.builtin.villager3WalkFront2\", \"sprites.builtin.villager3WalkFront3\", \"sprites.builtin.villager3WalkBack1\", \"sprites.builtin.villager3WalkBack2\", \"sprites.builtin.villager3WalkBack3\", \"sprites.builtin.villager3WalkLeft1\", \"sprites.builtin.villager3WalkLeft2\", \"sprites.builtin.villager3WalkLeft3\", \"sprites.builtin.villager3WalkRight1\", \"sprites.builtin.villager3WalkRight2\", \"sprites.builtin.villager3WalkRight3\", \"sprites.builtin.villager4WalkFront1\", \"sprites.builtin.villager4WalkFront2\", \"sprites.builtin.villager4WalkFront3\", \"sprites.builtin.villager4WalkBack1\", \"sprites.builtin.villager4WalkBack2\", \"sprites.builtin.villager4WalkBack3\", \"sprites.builtin.villager4WalkLeft1\", \"sprites.builtin.villager4WalkLeft2\", \"sprites.builtin.villager4WalkRight1\", \"sprites.builtin.villager4WalkRight2\", \"sprites.castle.heroFrontAttack1\", \"sprites.castle.heroFrontAttack2\", \"sprites.castle.heroFrontAttack3\", \"sprites.castle.heroFrontAttack4\", \"sprites.castle.heroSideAttackLeft1\", \"sprites.castle.heroSideAttackLeft2\", \"sprites.castle.heroSideAttackLeft3\", \"sprites.castle.heroSideAttackLeft4\", \"sprites.castle.heroSideAttackRight4\", \"sprites.castle.heroSideAttackRight3\", \"sprites.castle.heroSideAttackRight2\", \"sprites.castle.heroSideAttackRight1\", \"sprites.castle.heroWalkFront1\", \"sprites.castle.heroWalkFront2\", \"sprites.castle.heroWalkFront3\", \"sprites.castle.heroWalkFront4\", \"sprites.castle.heroWalkBack1\", \"sprites.castle.heroWalkBack2\", \"sprites.castle.heroWalkBack3\", \"sprites.castle.heroWalkBack4\", \"sprites.castle.heroWalkShieldFront1\", \"sprites.castle.heroWalkShieldFront2\", \"sprites.castle.heroWalkShieldFront3\", \"sprites.castle.heroWalkShieldFront4\", \"sprites.castle.heroWalkShieldBack1\", \"sprites.castle.heroWalkShieldBack2\", \"sprites.castle.heroWalkShieldBack3\", \"sprites.castle.heroWalkShieldBack4\", \"sprites.castle.heroWalkShieldSideLeft1\", \"sprites.castle.heroWalkShieldSideLeft2\", \"sprites.castle.heroWalkShieldSideLeft3\", \"sprites.castle.heroWalkShieldSideLeft4\", \"sprites.castle.heroWalkShieldSideRight4\", \"sprites.castle.heroWalkShieldSideRight3\", \"sprites.castle.heroWalkShieldSideRight2\", \"sprites.castle.heroWalkShieldSideRight1\", \"sprites.castle.heroWalkSideLeft1\", \"sprites.castle.heroWalkSideLeft2\", \"sprites.castle.heroWalkSideLeft3\", \"sprites.castle.heroWalkSideLeft4\", \"sprites.castle.heroWalkSideRight4\", \"sprites.castle.heroWalkSideRight3\", \"sprites.castle.heroWalkSideRight2\", \"sprites.castle.heroWalkSideRight1\", \"sprites.castle.houseRed\", \"sprites.castle.houseBlue\", \"sprites.castle.princessFront0\", \"sprites.castle.princessFront1\", \"sprites.castle.princessFront2\", \"sprites.castle.princessLeft0\", \"sprites.castle.princessLeft1\", \"sprites.castle.princessLeft2\", \"sprites.castle.princessBack0\", \"sprites.castle.princessBack1\", \"sprites.castle.princessBack2\", \"sprites.castle.princess2Front\", \"sprites.castle.princess2WalkFront1\", \"sprites.castle.princess2WalkFront2\", \"sprites.castle.princess2WalkFront3\", \"sprites.castle.princess2Back\", \"sprites.castle.princess2WalkBack1\", \"sprites.castle.princess2WalkBack2\", \"sprites.castle.princess2WalkBack3\", \"sprites.castle.princess2Left1\", \"sprites.castle.princess2Left2\", \"sprites.castle.princess2Right1\", \"sprites.castle.princess2Right2\", \"sprites.castle.rock0\", \"sprites.castle.rock1\", \"sprites.castle.rock2\", \"sprites.castle.saplingOak\", \"sprites.castle.saplingPine\", \"sprites.castle.shrub\", \"sprites.castle.skellyFront\", \"sprites.castle.skellyWalkFront1\", \"sprites.castle.skellyWalkFront2\", \"sprites.castle.skellyWalkFront3\", \"sprites.castle.skellyAttackFront1\", \"sprites.castle.skellyAttackFront2\", \"sprites.castle.skellyAttackFront3\", \"sprites.castle.skellyAttackFront4\", \"sprites.castle.skellyWalkLeft1\", \"sprites.castle.skellyAttackLeft1\", \"sprites.castle.skellyAttackLeft2\", \"sprites.castle.skellyWalkLeft2\", \"sprites.castle.skellyWalkRight1\", \"sprites.castle.skellyAttackRight1\", \"sprites.castle.skellyAttackRight2\", \"sprites.castle.skellyWalkRight2\", \"sprites.castle.tileGrass2\", \"sprites.castle.tilePath1\", \"sprites.castle.tilePath2\", \"sprites.castle.tilePath3\", \"sprites.castle.tileGrass1\", \"sprites.castle.tilePath4\", \"sprites.castle.tilePath5\", \"sprites.castle.tilePath6\", \"sprites.castle.tileGrass3\", \"sprites.castle.tilePath7\", \"sprites.castle.tilePath8\", \"sprites.castle.tilePath9\", \"sprites.castle.tileDarkGrass1\", \"sprites.castle.tileDarkGrass2\", \"sprites.castle.tileDarkGrass3\", \"sprites.castle.treePine\", \"sprites.castle.treeOak\", \"sprites.castle.treeSmallPine\", \"sprites.dialog.hugeLeaf\", \"sprites.dialog.largeShell\", \"sprites.dialog.largeStar\", \"sprites.dialog.mediumStar\", \"sprites.dialog.mediumShell\", \"sprites.dialog.mediumLeaf0\", \"sprites.dialog.mediumLeaf1\", \"sprites.dialog.smallIndustrial0\", \"sprites.dialog.smallIndustrial1\", \"sprites.dialog.smallBlue0\", \"sprites.dialog.smallBlue1\", \"sprites.dialog.smallDefault\", \"sprites.dialog.smallSwirlyWhite\", \"sprites.dialog.smallSwirlyPurple\", \"sprites.dialog.smallDialogLeftThin\", \"sprites.dialog.smallDialogLeftThick\", \"sprites.dialog.smallDialogCenterThin\", \"sprites.dialog.smallDialogcenterThick\", \"sprites.duck.duck1\", \"sprites.duck.duck2\", \"sprites.duck.duck3\", \"sprites.duck.duck4\", \"sprites.duck.duck5\", \"sprites.duck.duck6\", \"sprites.duck.duckHurt\", \"sprites.duck.log1\", \"sprites.duck.log2\", \"sprites.duck.log3\", \"sprites.duck.log4\", \"sprites.duck.log5\", \"sprites.duck.log6\", \"sprites.duck.log7\", \"sprites.duck.log8\", \"sprites.duck.tree\", \"sprites.dungeon.buttonOrange\", \"sprites.dungeon.buttonOrangeDepressed\", \"sprites.dungeon.buttonTeal\", \"sprites.dungeon.buttonTealDepressed\", \"sprites.dungeon.buttonPink\", \"sprites.dungeon.buttonPinkDepressed\", \"sprites.dungeon.chestClosed\", \"sprites.dungeon.chestOpen\", \"sprites.dungeon.collectibleInsignia\", \"sprites.dungeon.collectibleRedCrystal\", \"sprites.dungeon.collectibleBlueCrystal\", \"sprites.dungeon.darkGroundNorthWest0\", \"sprites.dungeon.darkGroundNorth\", \"sprites.dungeon.darkGroundNorthEast0\", \"sprites.dungeon.darkGroundNorthWest1\", \"sprites.dungeon.darkGroundWest\", \"sprites.dungeon.darkGroundCenter\", \"sprites.dungeon.darkGroundEast\", \"sprites.dungeon.darkGroundNorthEast1\", \"sprites.dungeon.darkGroundSouthWest0\", \"sprites.dungeon.darkGroundSouth\", \"sprites.dungeon.darkGroundSouthEast0\", \"sprites.dungeon.darkGroundSouthEast1\", \"sprites.dungeon.darkGroundSouthWest1\", \"sprites.dungeon.doorClosedWest\", \"sprites.dungeon.doorClosedSouth\", \"sprites.dungeon.doorClosedNorth\", \"sprites.dungeon.doorClosedEast\", \"sprites.dungeon.doorOpenWest\", \"sprites.dungeon.doorOpenSouth\", \"sprites.dungeon.doorOpenNorth\", \"sprites.dungeon.doorOpenEast\", \"sprites.dungeon.doorLockedWest\", \"sprites.dungeon.doorLockedSouth\", \"sprites.dungeon.doorLockedNorth\", \"sprites.dungeon.doorLockedEast\", \"sprites.dungeon.floorLight0\", \"sprites.dungeon.floorLight1\", \"sprites.dungeon.floorLight2\", \"sprites.dungeon.floorLightMoss\", \"sprites.dungeon.floorLight3\", \"sprites.dungeon.floorLight4\", \"sprites.dungeon.floorLight5\", \"sprites.dungeon.floorMixed\", \"sprites.dungeon.floorDark0\", \"sprites.dungeon.floorDark1\", \"sprites.dungeon.floorDark2\", \"sprites.dungeon.floorDarkDiamond\", \"sprites.dungeon.floorDark3\", \"sprites.dungeon.floorDark4\", \"sprites.dungeon.floorDark5\", \"sprites.dungeon.greenOuterNorthWest\", \"sprites.dungeon.greenOuterNorth0\", \"sprites.dungeon.greenOuterNorth1\", \"sprites.dungeon.greenOuterNorthEast\", \"sprites.dungeon.greenOuterWest0\", \"sprites.dungeon.greenInnerNorthWest\", \"sprites.dungeon.greenInnerNorthEast\", \"sprites.dungeon.greenOuterEast0\", \"sprites.dungeon.greenOuterWest1\", \"sprites.dungeon.greenInnerSouthWest\", \"sprites.dungeon.greenInnerSouthEast\", \"sprites.dungeon.greenOuterEast1\", \"sprites.dungeon.greenOuterSouthEast\", \"sprites.dungeon.greenOuterSouth0\", \"sprites.dungeon.greenOuterSouth1\", \"sprites.dungeon.greenOuterSouthWest\", \"sprites.dungeon.greenOuterNorth2\", \"sprites.dungeon.greenOuterEast2\", \"sprites.dungeon.greenOuterSouth2\", \"sprites.dungeon.greenOuterWest2\", \"sprites.dungeon.greenSwitchUp\", \"sprites.dungeon.greenSwitchDown\", \"sprites.dungeon.hazardWater\", \"sprites.dungeon.hazardLava0\", \"sprites.dungeon.hazardLava1\", \"sprites.dungeon.hazardHole\", \"sprites.dungeon.hazardSpike\", \"sprites.dungeon.purpleOuterNorthWest\", \"sprites.dungeon.purpleOuterNorth0\", \"sprites.dungeon.purpleOuterNorth1\", \"sprites.dungeon.purpleOuterNorthEast\", \"sprites.dungeon.purpleOuterWest0\", \"sprites.dungeon.purpleInnerNorthWest\", \"sprites.dungeon.purpleInnerNorthEast\", \"sprites.dungeon.purpleOuterEast0\", \"sprites.dungeon.purpleOuterWest1\", \"sprites.dungeon.purpleInnerSouthWest\", \"sprites.dungeon.purpleInnerSouthEast\", \"sprites.dungeon.purpleOuterEast1\", \"sprites.dungeon.purpleOuterSouthEast\", \"sprites.dungeon.purpleOuterSouth0\", \"sprites.dungeon.purpleOuterSouth1\", \"sprites.dungeon.purpleOuterSouthWest\", \"sprites.dungeon.purpleOuterNorth2\", \"sprites.dungeon.purpleOuterEast2\", \"sprites.dungeon.purpleOuterSouth2\", \"sprites.dungeon.purpleOuterWest2\", \"sprites.dungeon.purpleSwitchUp\", \"sprites.dungeon.purpleSwitchDown\", \"sprites.dungeon.stairWest\", \"sprites.dungeon.stairSouth\", \"sprites.dungeon.stairNorth\", \"sprites.dungeon.stairEast\", \"sprites.dungeon.stairLarge\", \"sprites.dungeon.stairLadder\", \"sprites.dungeon.statueLight\", \"sprites.dungeon.statueDark\", \"sprites.food.smallBurger\", \"sprites.food.smallApple\", \"sprites.food.smallLemon\", \"sprites.food.smallDrumstick\", \"sprites.food.smallHam\", \"sprites.food.smallPizza\", \"sprites.food.smallDonut\", \"sprites.food.smallCake\", \"sprites.food.smallIceCream\", \"sprites.food.smallStrawberry\", \"sprites.food.smallCherries\", \"sprites.food.smallTaco\", \"sprites.space.spaceSmallAsteroid0\", \"sprites.space.spaceSmallAsteroid1\", \"sprites.space.spaceSmallAsteroid2\", \"sprites.space.spaceSmallAsteroid3\", \"sprites.space.spaceAsteroid0\", \"sprites.space.spaceAsteroid1\", \"sprites.space.spaceSmallAsteroid4\", \"sprites.space.spaceSmallAsteroid5\", \"sprites.space.spaceRedShip\", \"sprites.space.spaceAsteroid2\", \"sprites.space.spaceAsteroid3\", \"sprites.space.spaceAsteroid4\", \"sprites.space.spaceOrangeShip\", \"sprites.space.spacePinkShip\", \"sprites.space.spaceBlueShip\", \"sprites.space.spaceGreenShip\", \"sprites.vehicle.carRedLeft\", \"sprites.vehicle.carRedRight\", \"sprites.vehicle.carRedBack\", \"sprites.vehicle.carRedFront\", \"sprites.vehicle.carBlueLeft\", \"sprites.vehicle.carBlueRight\", \"sprites.vehicle.carBlueBack\", \"sprites.vehicle.carBlueFront\", \"sprites.vehicle.carPinkLeft\", \"sprites.vehicle.carPinkRight\", \"sprites.vehicle.carPinkBack\", \"sprites.vehicle.carPinkFront\", \"sprites.vehicle.roadTurn1\", \"sprites.vehicle.roadTurn2\", \"sprites.vehicle.roadIntersection1\", \"sprites.vehicle.roadIntersection2\", \"sprites.vehicle.roadTurn3\", \"sprites.vehicle.roadTurn4\", \"sprites.vehicle.roadIntersection3\", \"sprites.vehicle.roadIntersection4\", \"sprites.vehicle.roadVertical\", \"sprites.vehicle.roadHorizontal\",\r\n    \"tiles.util.arrow0\", \"tiles.util.arrow1\", \"tiles.util.arrow2\", \"tiles.util.arrow3\", \"tiles.util.arrow4\", \"tiles.util.arrow5\", \"tiles.util.arrow6\", \"tiles.util.arrow7\", \"tiles.util.arrow8\", \"tiles.util.arrow9\", \"tiles.util.arrow10\", \"tiles.util.arrow11\", \"tiles.util.arrow12\", \"tiles.util.arrow13\", \"tiles.util.arrow14\", \"tiles.util.arrow15\", \"tiles.util.door0\", \"tiles.util.door1\", \"tiles.util.door2\", \"tiles.util.door3\", \"tiles.util.door4\", \"tiles.util.door5\", \"tiles.util.door6\", \"tiles.util.door7\", \"tiles.util.door8\", \"tiles.util.door9\", \"tiles.util.door10\", \"tiles.util.door11\", \"tiles.util.door12\", \"tiles.util.door13\", \"tiles.util.door14\", \"tiles.util.door15\", \"tiles.util.object0\", \"tiles.util.object1\", \"tiles.util.object2\", \"tiles.util.object3\", \"tiles.util.object4\", \"tiles.util.object5\", \"tiles.util.object6\", \"tiles.util.object7\", \"tiles.util.object8\", \"tiles.util.object9\", \"tiles.util.object10\", \"tiles.util.object11\", \"tiles.util.object12\", \"tiles.util.object13\", \"tiles.util.object14\", \"tiles.util.object15\",\r\n    \"effects.clouds\", \"effects.starField\", \"effects.bubbles\", \"effects.blizzard\", \"effects.disintegrate\", \"effects.ashes\", \"effects.halo\", \"effects.coolRadial\", \"effects.warmRadial\", \"effects.fire\", \"effects.rings\", \"effects.smiles\", \"effects.hearts\", \"effects.confetti\", \"effects.fountain\", \"effects.trail\", \"effects.spray\",\r\n];","import { ignoredValues } from \"./ignoredfields\";\r\nimport { getJRESImageFromDataString, getJRESImageFromImageLiteral, JRESImage } from \"./images\";\r\nimport { IMAGE_MIME_TYPE } from \"./util\";\r\n\r\nconst backendEndpoint = \"https://makecode.com/api\";\r\n\r\nexport interface JRes {\r\n    id: string; // something like \"sounds.bark\"\r\n    data: string;\r\n    dataEncoding?: string; // must be \"base64\" or missing (meaning the same)\r\n    icon?: string; // URL (usually data-URI) for the icon\r\n    namespace?: string; // used to construct id\r\n    mimeType: string;\r\n    tilemapTile?: boolean;\r\n    tileset?: string[];\r\n}\r\n\r\nexport const arcadePalette = [\r\n    \"#000000\",\r\n    \"#ffffff\",\r\n    \"#ff2121\",\r\n    \"#ff93c4\",\r\n    \"#ff8135\",\r\n    \"#fff609\",\r\n    \"#249ca3\",\r\n    \"#78dc52\",\r\n    \"#003fad\",\r\n    \"#87f2ff\",\r\n    \"#8e2ec4\",\r\n    \"#a4839f\",\r\n    \"#5c406c\",\r\n    \"#e5cdc4\",\r\n    \"#91463d\",\r\n    \"#000000\"\r\n];\r\n\r\n/*\r\n{\r\n    \"kind\": \"script\",\r\n    \"id\": \"62736-71028-62577-28752\",\r\n    \"shortid\": \"_UAVXEwU7RAew\",\r\n    \"time\": 1595883166,\r\n    \"name\": \"Untitled\",\r\n    \"description\": \"Made with  in Microsoft MakeCode Arcade.\",\r\n    \"target\": \"arcade\",\r\n    \"editor\": \"tsprj\",\r\n    \"meta\": {\r\n        \"versions\": {\r\n            \"branch\": \"v1.0.14\",\r\n            \"tag\": \"v1.0.14\",\r\n            \"commits\": \"https://github.com/microsoft/pxt-arcade/commits/1460ac1c88950799eb51c9c297588c8abdc91077\",\r\n            \"target\": \"1.0.14\",\r\n            \"pxt\": \"6.1.41\"\r\n        },\r\n        \"blocksHeight\": 0,\r\n        \"blocksWidth\": 0\r\n    },\r\n    \"thumb\": false\r\n}\r\n*/\r\n\r\nexport interface ScriptMeta {\r\n    kind: \"script\";\r\n    id: string;\r\n    shortid: string;\r\n    time: number;\r\n    name: string;\r\n    description: string;\r\n    target: string;\r\n    editor: string;\r\n    meta: {\r\n        versions: {\r\n            branch: string;\r\n            tag: string;\r\n            commits: string;\r\n            target: string;\r\n            pxt: string;\r\n        };\r\n        blocksHeight: number;\r\n        blocksWidth: number;\r\n    };\r\n    thumb: boolean;\r\n    isdeleted?: boolean;\r\n}\r\n\r\nexport interface ScriptInfo {\r\n    meta: ScriptMeta;\r\n    files: {[index: string]: string};\r\n    text: string[];\r\n    customPalette?: string[];\r\n    images: JRESImage[];\r\n}\r\n\r\n\r\nexport async function fetchMakeCodeScriptAsync(url: string) {\r\n    // https://makecode.com/_UAVXEwU7RAew\r\n    // https://arcade.makecode.com/62736-71028-62577-28752\r\n    let scriptID = url.trim();\r\n\r\n    if (scriptID.indexOf(\"/\") !== -1) {\r\n        scriptID = scriptID.substr(scriptID.lastIndexOf(\"/\") + 1)\r\n    }\r\n\r\n    const meta: ScriptMeta = await httpGetJSONAsync(backendEndpoint + \"/\" + scriptID);\r\n\r\n    // A mapping of filenames to filecontents\r\n    const filesystem: {[index: string]: string} = await httpGetJSONAsync(backendEndpoint + \"/\" + scriptID + \"/text\");\r\n\r\n    const config = filesystem[\"pxt.json\"];\r\n\r\n    let palette = arcadePalette;\r\n    let paletteIsCustom = false;\r\n\r\n    if (config) {\r\n        try {\r\n            let parsedConfig = JSON.parse(config);\r\n\r\n            if (parsedConfig?.palette && Array.isArray(parsedConfig.palette)) {\r\n                palette = parsedConfig.palette.slice()\r\n                paletteIsCustom = true;\r\n            }\r\n        }\r\n        catch (e) {\r\n            // ignore\r\n        }\r\n    }\r\n\r\n    const projectImages = grabImagesFromProject(filesystem);\r\n\r\n    return {\r\n        meta,\r\n        files: filesystem,\r\n        projectImages: projectImages,\r\n        text: grabTextFromProject(filesystem),\r\n        customPalette: paletteIsCustom ? palette : undefined\r\n    };\r\n}\r\n\r\n\r\nexport interface BlockFields {\r\n    variableNames: string[];\r\n    assetNames: string[];\r\n    other: string[];\r\n}\r\n\r\nexport function grabTextFromProject(filesystem: {[index: string]: string}): BlockFields {\r\n    const blocks = filesystem[\"main.blocks\"];\r\n    let strings: string[] = [];\r\n    let variableNames: string[] = [];\r\n    let assetNames: string[] = [];\r\n\r\n    const literalRegex = /\\s*img\\s*`[\\s\\da-fA-F.#tngrpoywTNGRPOYW]*`\\s*/m;\r\n    const numbersymbol = /^[+.\\s\\d-]*$/\r\n\r\n    ignoredValues.forEach(i => {\r\n        if (i.startsWith(\"Sprite.\")) {\r\n            ignoredValues.push(i + \"@set\")\r\n        }\r\n    });\r\n\r\n    if (blocks) {\r\n        const xml = new DOMParser().parseFromString(blocks, \"text/xml\");\r\n        const fields = xml.getElementsByTagName(\"field\");\r\n        for (let i = 0; i < fields.length; i++) {\r\n            console.log(fields.item(i)!.getAttribute(\"name\"));\r\n            const content = fields.item(i)!.textContent?.trim();\r\n            if (!content || numbersymbol.test(content) || literalRegex.test(content) || ignoredValues.indexOf(content) !== -1) continue;\r\n\r\n            const fieldName = fields.item(i)!.getAttribute(\"name\")\r\n            if (fieldName === \"VAR\") {\r\n                variableNames.push(content);\r\n            }\r\n            else {\r\n                const match = /^(?:assets\\s*.)?\\s*(?:(?:tilemap)|(?:image)|(?:tile)|(?:animation))\\s*`([^`]+)`\\s*$/.exec(content);\r\n                if (match) {\r\n                    if (/(?:myImage|tile|level|myAnim)\\d+/.test(match[1])) continue;\r\n                    assetNames.push(match[1]);\r\n                }\r\n                else {\r\n                    strings.push(content);\r\n                }\r\n            }\r\n        }\r\n\r\n        const comments = xml.getElementsByTagName(\"comment\");\r\n        for (let i = 0; i < comments.length; i++) {\r\n            const content = comments.item(i)!.textContent;\r\n            if (content && !/^[0-9\\s]*$/.test(content) && !literalRegex.test(content) && !numbersymbol.test(content) && ignoredValues.indexOf(content) === -1) {\r\n                strings.push(content.trim());\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        other: dedupe(strings),\r\n        assetNames: dedupe(assetNames),\r\n        variableNames: dedupe(variableNames)\r\n    }\r\n}\r\n\r\nfunction dedupe(strings: string[]) {\r\n    const out: string[] = []\r\n    strings.forEach(s => {\r\n        if (out.indexOf(s) === -1) {\r\n            out.push(s);\r\n        }\r\n    })\r\n    return out;\r\n}\r\n\r\n\r\nexport function grabImagesFromProject(filesystem: {[index: string]: string}, palette = arcadePalette) {\r\n    // Don't bother checking python and blocks files, they should all get converted to a matching ts\r\n    // file that will also contain all image literals\r\n    const typescriptFiles = Object.keys(filesystem).filter(filename =>\r\n        filename.endsWith(\".ts\") || filename.endsWith(\".jres\"));\r\n\r\n    // Grab any existing images in the project\r\n    const projectImages: JRESImage[] = [];\r\n    for (const filename of typescriptFiles) {\r\n\r\n        const fileText = filesystem[filename];\r\n        if (filename.endsWith(\"jres\")) {\r\n            projectImages.push(...grabImagesFromJRES(fileText, filename, palette));\r\n        }\r\n        else {\r\n            projectImages.push(...grabImagesFromTypeScript(fileText, filename, palette));\r\n        }\r\n    }\r\n\r\n    // Dedupe the images based on their content\r\n    const seenImages: {[index: string]: JRESImage} = {};\r\n\r\n    for (const image of projectImages) {\r\n        const existing = seenImages[image.data];\r\n        // Prefer images that have qualified names (from JRES)\r\n        if (!existing || (!existing.qualifiedName && image.qualifiedName)) {\r\n            seenImages[image.data] = image;\r\n        }\r\n    }\r\n\r\n    return Object.keys(seenImages).map(data => seenImages[data]);\r\n}\r\n\r\nfunction grabImagesFromJRES(jresText: string, filename: string, palette = arcadePalette): JRESImage[] {\r\n    let jres: {[index: string]: JRes | string};\r\n\r\n    try {\r\n        jres = JSON.parse(jresText);\r\n    }\r\n    catch (e) {\r\n        return [];\r\n    }\r\n\r\n    const metaEntry = jres[\"*\"] as JRes | undefined;\r\n\r\n    const metaMime = metaEntry?.mimeType || \"\";\r\n    const metaNamespace = metaEntry?.namespace || \"\";\r\n\r\n    const result: JRESImage[] = [];\r\n\r\n    for (const id of Object.keys(jres)) {\r\n        if (id === \"*\") continue;\r\n\r\n        let entry = jres[id];\r\n\r\n        if (typeof entry === \"string\") {\r\n            if (metaMime === IMAGE_MIME_TYPE) {\r\n                result.push(getJRESImageFromDataString(entry, palette, metaNamespace ? metaNamespace + \".\" + id : id, false, filename));\r\n            }\r\n        }\r\n        else if (entry.mimeType === IMAGE_MIME_TYPE) {\r\n            result.push(getJRESImageFromDataString(entry.data, palette, metaNamespace ? metaNamespace + \".\" + id : id, entry.tilemapTile, filename));\r\n        }\r\n    }\r\n\r\n    return result\r\n}\r\n\r\nfunction grabImagesFromTypeScript(fileText: string, filename: string, palette = arcadePalette) {\r\n    const literalRegex = /img\\s*`[\\s\\da-f.#tngrpoyw]*`/img;\r\n\r\n    const res: JRESImage[] = [];\r\n\r\n    fileText.replace(literalRegex, match => {\r\n        res.push(getJRESImageFromImageLiteral(match, palette, filename))\r\n        return \"\";\r\n    });\r\n\r\n    return res;\r\n}\r\n\r\n\r\nfunction httpGetJSONAsync(url: string): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n        const request = new XMLHttpRequest();\r\n\r\n        request.addEventListener(\"error\", err => {\r\n            reject(err);\r\n        });\r\n\r\n        request.addEventListener(\"load\", () => {\r\n            try {\r\n                resolve(JSON.parse(request.responseText));\r\n            }\r\n            catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n\r\n        request.open(\"GET\", url);\r\n        request.send();\r\n    });\r\n}","export function setupDragAndDrop(r: HTMLElement, filter: (file: File) => boolean, dragged: (files: File[]) => void) {\r\n    r.addEventListener('paste', function (e: ClipboardEvent) {\r\n        if (e.clipboardData) {\r\n            // has file?\r\n            let files: File[] = [];\r\n            for (let i = 0; i < e.clipboardData.files.length; i++) {\r\n                if (e.clipboardData.files.item(i)) files.push(e.clipboardData.files.item(i) as File);\r\n            }\r\n            files = files.filter(filter);\r\n            if (files.length > 0) {\r\n                e.stopPropagation(); // Stops some browsers from redirecting.\r\n                e.preventDefault();\r\n                dragged(files);\r\n            }\r\n            // has item?\r\n            else if (e.clipboardData.items && e.clipboardData.items.length > 0) {\r\n                let f = e.clipboardData.items[0].getAsFile()\r\n                if (f) {\r\n                    e.stopPropagation(); // Stops some browsers from redirecting.\r\n                    e.preventDefault();\r\n                    dragged([f])\r\n                }\r\n            }\r\n        }\r\n    })\r\n    r.addEventListener('dragover', function (e: DragEvent) {\r\n        if (e.dataTransfer) {\r\n            let types = e.dataTransfer.types;\r\n            let found = false;\r\n            for (let i = 0; i < types.length; ++i)\r\n                if (types[i] === \"Files\")\r\n                    found = true;\r\n            if (found) {\r\n                if (e.preventDefault) e.preventDefault(); // Necessary. Allows us to drop.\r\n                e.dataTransfer.dropEffect = 'copy';  // See the section on the DataTransfer object.\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }, false);\r\n    r.addEventListener('drop', function (e: DragEvent) {\r\n        if (e.dataTransfer) {\r\n            const files: File[] = [];\r\n            for (let i = 0; i < e.dataTransfer.files.length; i++) {\r\n                if (e.dataTransfer.files.item(i)) files.push(e.dataTransfer.files.item(i) as File);\r\n            }\r\n            if (files.length > 0) {\r\n                e.stopPropagation(); // Stops some browsers from redirecting.\r\n                e.preventDefault();\r\n                dragged(files);\r\n            }\r\n        }\r\n        return false;\r\n    }, false);\r\n    r.addEventListener('dragend', function (e: DragEvent) {\r\n        return false;\r\n    }, false);\r\n}\r\n\r\nexport function fileReadAsBufferAsync(f: File): Promise<Uint8Array | null> { // ArrayBuffer\r\n    if (!f)\r\n        return Promise.resolve<Uint8Array | null>(null);\r\n    else {\r\n        return new Promise<Uint8Array | null>((resolve, reject) => {\r\n            let reader = new FileReader();\r\n            reader.onerror = (ev) => resolve(null);\r\n            reader.onload = (ev) => resolve(new Uint8Array(reader.result as ArrayBuffer));\r\n            reader.readAsArrayBuffer(f);\r\n        });\r\n    }\r\n}\r\n\r\nexport function fileReadAsTextAsync(f: File): Promise<string | null> {\r\n    if (!f)\r\n        return Promise.resolve<string| null>(null);\r\n    else {\r\n        return new Promise<string | null>((resolve, reject) => {\r\n            let reader = new FileReader();\r\n            reader.onerror = (ev) => resolve(null);\r\n            reader.onload = (ev) => resolve(reader.result as string);\r\n            reader.readAsText(f);\r\n        });\r\n    }\r\n}\r\n","\r\n// @ts-ignore\r\nimport * as LZMA from \"../node_modules/lzma/src/lzma_worker-min\";\r\n\r\nexport function lzmaCompressAsync(text: string) {\r\n    const lzma = LZMA.LZMA;\r\n\r\n    return new Promise<Uint8Array>((resolve, reject) => {\r\n        try {\r\n            lzma.compress(text, 7, (res: any, error: any) => {\r\n                if (error) reject(error);\r\n                else resolve(new Uint8Array(res));\r\n            });\r\n        }\r\n        catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n}\r\n\r\nexport function lzmaDecompressAsync(data: Uint8Array) {\r\n    const lzma = LZMA.LZMA;\r\n\r\n    return new Promise<string>((resolve, reject) => {\r\n        try {\r\n            lzma.decompress(data, (res: string, error: any) => {\r\n                if (error) reject(error);\r\n                else resolve(res);\r\n            });\r\n        }\r\n        catch (e) {\r\n            reject(e);\r\n        }\r\n    });\r\n}","import { AssetInfo, Asset } from \"./components/Asset\";\r\nimport { lzmaCompressAsync } from \"./lzma\";\r\nimport { JRes } from \"./share\";\r\nimport { escapeIdentifier, IMAGE_MIME_TYPE, browserDownloadUInt8Array, browserDownloadText } from \"./util\";\r\nimport { imgEncodeJRESImage } from \"./images\";\r\n\r\n\r\ninterface PXTHexFile {\r\n    meta: {\r\n        cloudId: \"pxt/arcade\";\r\n        targetVersions: any;\r\n        editor: \"tsprj\";\r\n        name: string;\r\n    };\r\n    source: string; // a mapping of filenames to file text that has been stringified\r\n}\r\n\r\nconst PROJECT_COMMENT = `/*\r\n * This project was created using arcade-sprite-pack. If you\r\n * want to publish this project to GitHub as a sprite pack, do\r\n * not add any code to this file! The code that is running in the\r\n * simulator can be edited by clicking on the file explorer to the\r\n * left and selecting \"test.ts\". Any code added to \"test.ts\" will\r\n * not be added to a project that imports this sprite pack as an\r\n * extension.\r\n *\r\n * If you don't wish to publish this project, you can use this project\r\n * as-is. Your sprites should show up in the sprite gallery. Make sure\r\n * you delete the code in \"test.ts\"!\r\n *\r\n *\r\n * To publish this project to GitHub:\r\n *   1. Rename this project to something descriptive\r\n *   2. Click the GitHub button in the bottom bar next to the save\r\n *      button (sign in to GitHub if prompted)\r\n *   3. Choose a name for your repository. This is the name that\r\n *      people will see when importing your project.\r\n *   4. Make sure \"public repository\" is selected in the dropdown\r\n *      if you want other people to be able to use your sprites\r\n *   5. Click \"go ahead\"\r\n *   6. If you are on a shared computer, make sure you sign out of\r\n *      GitHub!\r\n *\r\n *\r\n * To add a published project to an Arcade project:\r\n *   1. Inside the MakeCode editor, click \"Extensions\" under \"Advanced\"\r\n *      in the toolbox\r\n *   2. Inside the search box that appears, type your GitHub username\r\n *      followed by a \"/\" and the name of the repository. It should\r\n *      look something like this: username/repository\r\n *   3. Hit enter on your keyboard and click the card that appears\r\n *   4. The sprites should now show up in the gallery of the sprite\r\n *      editor (at the bottom)\r\n * */\r\n`;\r\n\r\nconst TEST_SCRIPT = `\r\nconst padding = 10;\r\nconst speed = 50;\r\ngame.onUpdate(function() {\r\n    for (const sprite of sprites.allOfKind(SpriteKind.Player)) {\r\n        if (sprite.vx > 0 && sprite.x >= screen.width - padding) {\r\n            sprite.x = screen.width - padding;\r\n            sprite.vx = 0;\r\n            sprite.vy = speed;\r\n        }\r\n        else if (sprite.vy > 0 && sprite.y >= screen.height - padding) {\r\n            sprite.y = screen.height - padding;\r\n            sprite.vx = -speed;\r\n            sprite.vy = 0;\r\n        }\r\n        else if (sprite.vx < 0 && sprite.x <= padding) {\r\n            sprite.x = padding;\r\n            sprite.vx = 0;\r\n            sprite.vy = -speed;\r\n        }\r\n        else if (sprite.vy < 0 && sprite.bottom <= 0) {\r\n            sprite.destroy();\r\n        }\r\n    }\r\n})\r\n\r\nlet index = 0;\r\ngame.onUpdateInterval(700, function() {\r\n    const asset = sprites.create(allImages[index], SpriteKind.Player);\r\n    asset.x = padding;\r\n    asset.y = padding;\r\n    asset.vx = speed;\r\n    asset.setFlag(SpriteFlag.Ghost, true)\r\n    index = (index + 1) % allImages.length;\r\n})\r\n\r\nlet line1 = sprites.create(img\\`0\\`, SpriteKind.Food)\r\nline1.say(\"PRESS A TO  \")\r\n\r\nlet line2 = sprites.create(img\\`0\\`, SpriteKind.Food)\r\nline2.say(\"CHANGE COLOR\")\r\nline2.top += 10\r\n\r\nlet bgColor = 0;\r\ncontroller.player1.onButtonEvent(ControllerButton.A, ControllerButtonEvent.Pressed, function() {\r\n    scene.setBackgroundColor(bgColor);\r\n    bgColor = (bgColor + 1) % 15\r\n})`;\r\n\r\nconst MAIN_BLOCKS = \"main.blocks\"\r\nconst ASSET_TS = \"assets.ts\";\r\nconst ASSET_JRES = \"assets.jres\"\r\nconst TEST_TS = \"test.ts\";\r\nconst MAIN_TS = \"main.ts\";\r\nconst PXT_JSON = \"pxt.json\";\r\nconst README_MD = \"README.md\";\r\n\r\n\r\nfunction createProjectBlobAsync(name: string, assetTS: string, assetJRES: string, testTS: string) {\r\n    const config = JSON.stringify({\r\n        \"name\": name,\r\n        \"dependencies\": {\r\n            \"device\": \"*\" // required for arcade\r\n        },\r\n        \"description\": \"An asset pack for MakeCode Arcade\",\r\n        \"files\": [\r\n            MAIN_BLOCKS,\r\n            MAIN_TS,\r\n            ASSET_JRES,\r\n            ASSET_TS\r\n        ],\r\n        \"testFiles\": [\r\n            TEST_TS\r\n        ]\r\n    }, null, 4);\r\n\r\n\r\n    const files: {[index: string]: string} = {};\r\n    files[PXT_JSON] = config;\r\n    files[MAIN_TS] = PROJECT_COMMENT;\r\n    files[TEST_TS] = testTS;\r\n    files[ASSET_TS] = assetTS;\r\n    files[ASSET_JRES] = assetJRES;\r\n    files[README_MD] = \"\"\r\n    files[MAIN_BLOCKS] =`<xml xmlns=\"http://www.w3.org/1999/xhtml\"><variables></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block></xml>`;\r\n\r\n\r\n    const project: PXTHexFile = {\r\n        meta: {\r\n            cloudId: \"pxt/arcade\",\r\n            targetVersions: {},\r\n            name: name,\r\n            editor: \"tsprj\"\r\n        },\r\n        source: JSON.stringify(files)\r\n    };\r\n\r\n    return lzmaCompressAsync(JSON.stringify(project));\r\n}\r\n\r\nexport async function downloadProjectAsync(name: string, assets: AssetInfo[]) {\r\n    let assetTS = \"\";\r\n\r\n    const assetJRES: {[index: string]: JRes | string} = {};\r\n    const takenNames: {[index: string]: boolean} = {};\r\n\r\n    const projectNamespace = escapeIdentifier(name) + \"Sprites\";\r\n    const qualifiedNames: string[] = [];\r\n\r\n\r\n    // @ts-ignore\r\n    assetJRES[\"*\"] = {\r\n        namespace: projectNamespace,\r\n        mimeType: IMAGE_MIME_TYPE\r\n    }\r\n\r\n    for (const asset of assets) {\r\n        const identifier = escapeName(asset.name);\r\n\r\n        if (asset.jres.tilemapTile) {\r\n            assetJRES[identifier] = {\r\n                id: identifier,\r\n                data: asset.jres.data,\r\n                tilemapTile: true,\r\n                mimeType: IMAGE_MIME_TYPE\r\n            };\r\n            assetTS += `    //% fixedInstance jres blockIdentity=images._tile\\n`\r\n        }\r\n        else {\r\n            assetJRES[identifier] = asset.jres.data;\r\n            assetTS += `    //% fixedInstance jres blockIdentity=images._image\\n`\r\n        }\r\n\r\n        assetTS += `    export const ${identifier} = image.ofBuffer(hex\\`\\`);\\n`\r\n        qualifiedNames.push(projectNamespace + \".\" + identifier);\r\n    }\r\n\r\n    assetTS = `namespace ${projectNamespace} {\\n${assetTS}\\n}\\n`;\r\n\r\n    const testTS = `const allImages = [${qualifiedNames.join(\",\")}]\\n${TEST_SCRIPT}`;\r\n    const project = await createProjectBlobAsync(name, assetTS, JSON.stringify(assetJRES), testTS);\r\n    return browserDownloadUInt8Array(project, name + \".mkcd\");\r\n\r\n\r\n\r\n    function escapeName(name: string) {\r\n        const escaped = escapeIdentifier(name);\r\n\r\n        if (!takenNames[escaped]) {\r\n            takenNames[escaped] = true;\r\n            return escaped;\r\n        }\r\n\r\n        let index = 2;\r\n        while (takenNames[escaped + index]) {\r\n            index++;\r\n        }\r\n\r\n        takenNames[escaped + index] = true;\r\n        return escaped + index;\r\n    }\r\n}\r\n\r\nexport async function downloadTypeScriptAsync(name: string, assets: AssetInfo[]) {\r\n    let assetTS = \"\";\r\n\r\n    let takenNames: {[index: string]: boolean} = {};\r\n\r\n    for (const asset of assets) {\r\n        assetTS += `const ${escapeName(asset.name)} = ${imgEncodeJRESImage(asset.jres)};\\n`\r\n    }\r\n\r\n    return browserDownloadText(assetTS, name + \".ts\");\r\n\r\n    function escapeName(name: string) {\r\n        const escaped = escapeIdentifier(name);\r\n\r\n        if (!takenNames[escaped]) {\r\n            takenNames[escaped] = true;\r\n            return escaped;\r\n        }\r\n\r\n        let index = 2;\r\n        while (takenNames[escaped + index]) {\r\n            index++;\r\n        }\r\n\r\n        takenNames[escaped + index] = true;\r\n        return escaped + index;\r\n    }\r\n}","const PATCH_DB_NAME = \"APPROVED_DB\";\r\nlet _db: IDBDatabase;\r\nlet openPromise: Promise<IDBDatabase>;\r\n\r\ninterface StringEntry {\r\n    str: string;\r\n    approved: boolean;\r\n    time: number\r\n}\r\n\r\nasync function initDBAsync() {\r\n    if (_db) return _db;\r\n\r\n    if (!openPromise) {\r\n        openPromise = new Promise((resolve, reject) => {\r\n\r\n            const request = indexedDB.open(PATCH_DB_NAME, 2);\r\n\r\n            request.onerror = event => {\r\n                reject();\r\n            };\r\n\r\n            request.onupgradeneeded = event => {\r\n                const db = request.result;\r\n                const objectStore = db.createObjectStore(\r\n                    \"approved\",\r\n                    {\r\n                        keyPath: \"str\"\r\n                    }\r\n                );\r\n                objectStore.createIndex(\"str\", \"str\", { unique: true });\r\n                objectStore.createIndex(\"approved\", \"approved\", { unique: false });\r\n                objectStore.createIndex(\"time\", \"time\", { unique: false });\r\n            };\r\n\r\n            request.onsuccess = event => {\r\n                _db = request.result;\r\n                resolve(_db);\r\n            }\r\n        });\r\n    }\r\n\r\n    return openPromise;\r\n}\r\n\r\nasync function lookupEntryAsync(str: string): Promise<StringEntry | undefined> {\r\n    const db = await initDBAsync();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const transaction = db.transaction([\"approved\"], \"readwrite\");\r\n        const objectStore = transaction.objectStore(\"approved\");\r\n        const request = objectStore.get(str) as IDBRequest<StringEntry>;\r\n        request.onerror = event => {\r\n            reject();\r\n        };\r\n        request.onsuccess = event => {\r\n            resolve(request.result);\r\n        };\r\n    })\r\n}\r\n\r\nasync function addEntryAsync(str: string, approved: boolean): Promise<void> {\r\n    const db = await initDBAsync();\r\n\r\n    return new Promise<void>((resolve, reject) => {\r\n        const transaction = db.transaction([\"approved\"], \"readwrite\");\r\n        const objectStore = transaction.objectStore(\"approved\");\r\n        const request = objectStore.add({\r\n            str,\r\n            approved,\r\n            time: Date.now()\r\n        });\r\n        request.onerror = event => {\r\n            reject();\r\n        };\r\n        request.onsuccess = event => {\r\n            resolve()\r\n        };\r\n    })\r\n}\r\n\r\n\r\nexport async function isStringApprovedAsync(str: string) {\r\n    const entry = await lookupEntryAsync(str);\r\n\r\n    if (entry) return entry.approved;\r\n    return false;\r\n}\r\n\r\nexport async function markStringApprovedAsync(str: string) {\r\n    await addEntryAsync(str, true);\r\n}\r\n","import React from 'react';\r\nimport { Alert, AlertProps } from './Alert';\r\nimport { Asset, AssetInfo } from './Asset';\r\nimport { JRESImage, getJRESImageFromDataString, getJRESImageFromUint8Array } from '../images'\r\nimport { arcadePalette, BlockFields, fetchMakeCodeScriptAsync, grabImagesFromProject } from '../share';\r\nimport { setupDragAndDrop, fileReadAsBufferAsync } from '../dragAndDrop';\r\nimport '../styles/AssetList.css';\r\nimport { downloadProjectAsync, downloadTypeScriptAsync } from '../export';\r\nimport { lzmaDecompressAsync } from '../lzma';\r\nimport { isStringApprovedAsync, markStringApprovedAsync } from '../db';\r\n\r\ninterface AlertInfo extends AlertProps {\r\n    type: \"delete\" | \"import\" | \"warning\" | \"export\";\r\n}\r\n\r\ninterface FileInfo {\r\n    name: string;\r\n    content: string;\r\n}\r\n\r\ninterface AssetListProps {\r\n    postMessage: (msg: any) => void;\r\n}\r\n\r\ninterface AssetListState {\r\n    items: AssetInfo[];\r\n    runUrl?: string;\r\n    isDeleted?: boolean;\r\n    selected: number;\r\n    saving?: number;\r\n    dragging?: boolean;\r\n    alert?: AlertInfo;\r\n    textItems?: BlockFields;\r\n    files?: FileInfo[];\r\n}\r\n\r\nconst DEFAULT_NAME = \"mySprite\";\r\nconst DEFAULT_JRES = {\r\n    data: \"hwQQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==\",\r\n    previewURI: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAH0lEQVQ4T2NkoBAwUqifYdQAhtEwYBgNA1A+Gvi8AAAmmAARf9qcXAAAAABJRU5ErkJggg==\",\r\n    width: 16,\r\n    height: 16,\r\n}\r\n\r\nconst STORAGE_KEY = \"SPRITE_DATA\"\r\nconst SAVE_INTERVAL = 2000; // autosave every 2s\r\nconst PROJECT_NAME = \"spritePack\"\r\n\r\nclass AssetList extends React.Component<AssetListProps, AssetListState> {\r\n    private _items: AssetInfo[];\r\n    private _importInputRef!: HTMLInputElement;\r\n    private _exportInputRef!: HTMLInputElement;\r\n    private _dragInit: boolean = false;\r\n\r\n    constructor(props: AssetListProps) {\r\n        super(props);\r\n        this._items = [];\r\n\r\n        this.state = {\r\n            items: this._items,\r\n            selected: 0,\r\n            alert: {\r\n                type: \"import\",\r\n                icon: \"upload\",\r\n                title: \"Import Sprites\",\r\n                text: \"Paste a URL from MakeCode Arcade or drag and drop PNG files to import a project.\",\r\n                options: [{\r\n                        text: \"Import\",\r\n                        onClick: () => {\r\n                            this.importAssets(this._importInputRef.value);\r\n                            this.hideAlert();\r\n                        }\r\n                    }]\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener(\"message\", this.handleMessage);\r\n        // this.loadJres(this._items[this.state.selected]);\r\n\r\n        // TODO: intermittent bug where floating layers are not registered\r\n        // in the \"update\" probably to do with pxt-side handling of getJres\r\n        setTimeout(this.autosaveJres, SAVE_INTERVAL);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener(\"message\", this.handleMessage);\r\n        window.localStorage.setItem(STORAGE_KEY, JSON.stringify(this._items));\r\n    }\r\n\r\n    componentDidUpdate(prevProps: AssetListProps, prevState: AssetListState) {\r\n        if (this.state.saving !== undefined && prevState.saving === undefined) {\r\n            this.getJres();\r\n        }\r\n\r\n        if (this.state.selected !== prevState.selected ||\r\n            this.state.items.length !== prevState.items.length) {\r\n            this.loadJres(this._items[this.state.selected]);\r\n        }\r\n        window.localStorage.setItem(STORAGE_KEY, JSON.stringify(this._items));\r\n    }\r\n\r\n    handleMessage = (msg: any) => {\r\n        const data = msg.data;\r\n        switch (data.type) {\r\n            case \"ready\":\r\n                this.loadJres(this._items[this.state.selected]);\r\n                break;\r\n            case \"update\":\r\n                const jresImage = getJRESImageFromDataString(data.message, arcadePalette);\r\n                if (this.state.saving !== undefined) {\r\n                    const saving = this.state.saving;\r\n                    this._items[this.state.selected].jres = jresImage;\r\n                    this.setState({\r\n                        items: this._items,\r\n                        selected: saving,\r\n                        saving: undefined\r\n                    });\r\n                } else {\r\n                    this._items[this.state.selected].jres = jresImage;\r\n                    this.setState({ items: this._items });\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    autosaveJres = () => {\r\n        if (!this.state.saving) this.getJres();\r\n        setTimeout(this.autosaveJres, SAVE_INTERVAL);\r\n    }\r\n\r\n    loadJres = (asset: AssetInfo) => {\r\n        this.props.postMessage({ type: \"initialize\", message: asset.jres.data });\r\n    }\r\n\r\n    getJres = () => {\r\n        this.props.postMessage({ type: \"update\" });\r\n    }\r\n\r\n    /** ASSET HANDLING */\r\n\r\n    addAsset(name?: string, jres?: JRESImage) {\r\n        this._items.push({\r\n            name: this.getValidAssetName(name || DEFAULT_NAME),\r\n            jres: jres || { ...DEFAULT_JRES }\r\n        })\r\n        this.setState({\r\n            items: this._items,\r\n            saving: this._items.length - 1\r\n         });\r\n    }\r\n\r\n    deleteAsset(index: number) {\r\n        this._items = this._items.filter((el, i) => i !== index);\r\n        this.setState({\r\n            items: this._items,\r\n            selected: Math.max(index - 1, 0)\r\n         })\r\n    }\r\n\r\n    renameAsset(index: number, newName: string) {\r\n        if (this._items[index].name !== newName) {\r\n            this._items[index].name = this.getValidAssetName(newName);\r\n            this.setState({ items: this._items });\r\n        }\r\n    }\r\n\r\n    clearAssets() {\r\n        this._items = [{\r\n            name: DEFAULT_NAME,\r\n            jres: { ...DEFAULT_JRES }\r\n        }];\r\n        this.setState({ items: this._items, selected: 0 });\r\n    }\r\n\r\n    async importAssets(url: string, replace?: boolean) {\r\n        const res = await fetchMakeCodeScriptAsync(url);\r\n        const scriptId = res?.meta?.id;\r\n        const scriptTarget = res?.meta?.target;\r\n        const runUrl = scriptId && scriptTarget && `https://${res?.meta?.target}.makecode.com/---run?id=${res?.meta?.id}&noFooter=1&single=1&fullScreen=1`;\r\n\r\n        const cvsHatesThisScript = res?.meta?.isdeleted;\r\n\r\n        if (replace) this._items = [];\r\n        for (const el of res.projectImages) {\r\n            if (!(await isStringApprovedAsync(el.previewURI))) {\r\n                this._items.push({ name: el.qualifiedName || this.getValidAssetName(DEFAULT_NAME), jres: el })\r\n            }\r\n        }\r\n\r\n        let files: FileInfo[] = [];\r\n        let ignoredFiles = [\"images.g.jres\", \"images.g.ts\", \"main.blocks\", \"tilemap.g.jres\", \"tilemap.g.ts\"]\r\n\r\n        for (const file of Object.keys(res.files)) {\r\n            if (ignoredFiles.indexOf(file) === -1) {\r\n                files.push({\r\n                    name: file,\r\n                    content: res.files[file]\r\n                });\r\n            }\r\n        }\r\n\r\n        files = files.filter(f => !!f.content.trim())\r\n\r\n        const priorities = [\".md\", \".json\", \".py\", \".ts\"];\r\n\r\n        files.sort((a, b) => {\r\n            const aPriority = priorities.indexOf(a.name.substr(a.name.lastIndexOf(\".\")));\r\n            const bPriority = priorities.indexOf(b.name.substr(b.name.lastIndexOf(\".\")));\r\n            return aPriority - bPriority;\r\n        })\r\n\r\n        const unapprovedText: BlockFields = {\r\n            other: [],\r\n            assetNames: [],\r\n            variableNames: []\r\n        }\r\n\r\n        if (res.text) {\r\n            for (const str of res.text.other) {\r\n                if (!(await isStringApprovedAsync(str))) {\r\n                    unapprovedText.other.push(str);\r\n                }\r\n            }\r\n\r\n            for (const str of res.text.assetNames) {\r\n                if (!(await isStringApprovedAsync(str))) {\r\n                    unapprovedText.assetNames.push(str);\r\n                }\r\n            }\r\n\r\n            for (const str of res.text.variableNames) {\r\n                if (!(await isStringApprovedAsync(str))) {\r\n                    unapprovedText.variableNames.push(str);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            items: this._items,\r\n            textItems: unapprovedText,\r\n            files,\r\n            runUrl,\r\n            isDeleted: cvsHatesThisScript,\r\n        });\r\n    }\r\n\r\n    getAssetIndex(name: string): number {\r\n        return this._items.findIndex((el) => el.name.toLowerCase() === name.toLowerCase());\r\n    }\r\n\r\n    getValidAssetName(name: string): string {\r\n        name = name.replace(/[^a-zA-Z0-9]/g, '');\r\n        while (this.getAssetIndex(name) >= 0) {\r\n            let r = name.match(/^(.*?)(\\d+)$/);\r\n            // increment counter by one\r\n            name = r ? r[1] + (parseInt(r[2], 10) + 1) : name + \"2\";\r\n        }\r\n        return name;\r\n    }\r\n\r\n    /** ASSET EVENT LISTENERS */\r\n\r\n    onAssetClick = (index: number): (e: any) => void => {\r\n        return () => {\r\n            this.setState({ saving: index });\r\n        }\r\n    }\r\n\r\n    onAssetRename = (index: number): (name: string) => void => {\r\n        return (name: string) => { this.renameAsset(index, name) };\r\n    }\r\n\r\n    onAssetDelete = () => {\r\n        if (this._items.length > 1) {\r\n            this.setState({\r\n                alert: {\r\n                    type: \"delete\",\r\n                    icon: \"exclamation triangle\",\r\n                    title: \"Warning!\",\r\n                    text: \"Deleting an image is permanent. You will not be able to undo this action.\",\r\n                    options: [{\r\n                            text: \"Delete\",\r\n                            onClick: () => {\r\n                                this.deleteAsset(this.state.selected);\r\n                                this.hideAlert();\r\n                            }\r\n                        }]\r\n                }\r\n            })\r\n        } else {\r\n            this.setState({\r\n                alert: {\r\n                    type: \"warning\",\r\n                    icon: \"ban\",\r\n                    title: \"Unable to delete\",\r\n                    text: \"You must have at least one image in your project.\",\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onAddButtonClick = () => {\r\n        this.addAsset(DEFAULT_NAME);\r\n    }\r\n\r\n    onDeleteButtonClick = () => {\r\n        this.setState({\r\n            alert: {\r\n                type: \"delete\",\r\n                icon: \"exclamation triangle\",\r\n                title: \"WARNING\",\r\n                text: \"This will delete ALL assets in this project. You will not be able to undo this action.\",\r\n                options: [{\r\n                        text: \"Delete All\",\r\n                        style: {\r\n                            backgroundColor: \"#dc3f34\"\r\n                        },\r\n                        onClick: () => {\r\n                            this.clearAssets();\r\n                            this.hideAlert();\r\n                        }\r\n                    }]\r\n            }\r\n        })\r\n    }\r\n\r\n    onPaste = (ev: React.ClipboardEvent<HTMLInputElement>) => {\r\n        this.clearAssets();\r\n        this.importAssets(ev.clipboardData.getData(\"text\"));\r\n        this.hideAlert();\r\n    }\r\n\r\n    onImportButtonClick = () => {\r\n        this.setState({\r\n            alert: {\r\n                type: \"import\",\r\n                icon: \"upload\",\r\n                title: \"Import Sprites\",\r\n                text: \"Paste a URL from MakeCode Arcade or drag and drop PNG files to import existing sprites.\",\r\n                options: [{\r\n                        text: \"Import\",\r\n                        onClick: () => {\r\n                            this.importAssets(this._importInputRef.value);\r\n                            this.hideAlert();\r\n                        }\r\n                    }]\r\n            }\r\n        })\r\n    }\r\n\r\n    onImportDragEnter = (e: any) => {\r\n        this.setState({ dragging: true });\r\n    }\r\n\r\n    onImportDragLeave = (e: any) => {\r\n        this.setState({ dragging: false });\r\n    }\r\n\r\n    onExportButtonClick = () => {\r\n        // ensure we have most updated sprites\r\n        this.getJres();\r\n        this.setState({\r\n            alert: {\r\n                type: \"export\",\r\n                icon: \"download\",\r\n                title: \"Export Sprite Pack\",\r\n                text: \"Export your sprites as an .mckd project to load directly into Arcade, or as a .ts file with your images encoded.\",\r\n                options: [{\r\n                        text: \"Download MKCD\",\r\n                        onClick: () => {\r\n                            // download as MKCD\r\n                            this.hideAlert();\r\n                            downloadProjectAsync(this._exportInputRef.value || PROJECT_NAME, this.state.items);\r\n                        }\r\n                    },\r\n                    {\r\n                        text: \"Download TS\",\r\n                        onClick: () => {\r\n                            // download as TS\r\n                            this.hideAlert();\r\n                            downloadTypeScriptAsync(this._exportInputRef.value || PROJECT_NAME, this.state.items);\r\n                        }\r\n                    }]\r\n            }\r\n        })\r\n    }\r\n\r\n    hideAlert = () => {\r\n        this.setState({ alert: undefined });\r\n    }\r\n\r\n    /* REF HANDLING */\r\n\r\n    handleImportInputRef = (el: HTMLInputElement) => {\r\n        this._importInputRef = el;\r\n    }\r\n\r\n    handleExportInputRef = (el: HTMLInputElement) => {\r\n        this._exportInputRef = el;\r\n    }\r\n\r\n    handleDropRef = (el: HTMLInputElement) => {\r\n        if (!this._dragInit) {\r\n            this._dragInit = true;\r\n            setupDragAndDrop(document.body, f => true, async files => {\r\n                for (const f of files) {\r\n                    const idx = f.name.lastIndexOf(\".\");\r\n                    const ext = f.name.substr(idx);\r\n                    const name = f.name.slice(0, idx);\r\n                    if (ext.toLowerCase() === \".png\") {\r\n                        const buf = await fileReadAsBufferAsync(f);\r\n                        if (buf) {\r\n                            const jres = await getJRESImageFromUint8Array(buf, arcadePalette);\r\n                            if (jres) {\r\n                                this.addAsset(name, jres);\r\n                                this.hideAlert();\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (ext.toLowerCase() === \".mkcd\") {\r\n                        const buf = await fileReadAsBufferAsync(f);\r\n                        if (buf) {\r\n                            const text = await lzmaDecompressAsync(buf);\r\n                            try {\r\n                                const project = JSON.parse(text);\r\n                                const files = JSON.parse(project.source);\r\n\r\n                                const projectImages = grabImagesFromProject(files);\r\n\r\n                                projectImages.forEach((el: JRESImage) => {\r\n                                    this._items.push({ name: el.qualifiedName || this.getValidAssetName(DEFAULT_NAME), jres: el })\r\n                                } )\r\n                                this.setState({items: this._items})\r\n                                this.hideAlert();\r\n\r\n                            }\r\n                            catch (e) {\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    async approveAllStringsAsync(type: keyof BlockFields) {\r\n        const strs = this.state.textItems![type];\r\n\r\n        for (const str of strs) {\r\n            await markStringApprovedAsync(str)\r\n        }\r\n\r\n        this.setState({\r\n            textItems: {\r\n                assetNames: this.state.textItems!.assetNames.filter(s => strs.indexOf(s) === -1),\r\n                other: this.state.textItems!.other.filter(s => strs.indexOf(s) === -1),\r\n                variableNames: this.state.textItems!.variableNames.filter(s => strs.indexOf(s) === -1),\r\n            }\r\n        });\r\n    }\r\n\r\n    async approveAllImagesAsync() {\r\n        for (const item of this.state.items) {\r\n            if (await isStringApprovedAsync(item.jres.previewURI)) continue;\r\n\r\n            await markStringApprovedAsync(item.jres.previewURI);\r\n        }\r\n\r\n        this.setState({\r\n            items: []\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { items, selected, dragging, alert, textItems, files, runUrl, isDeleted } = this.state;\r\n\r\n        const { variableNames, assetNames, other } = textItems || {};\r\n\r\n        return <div id=\"asset-list\" onPaste={this.onPaste}>\r\n            {alert && <Alert icon={alert.icon} title={alert.title} text={alert.text} options={alert.options} visible={true} onClose={this.hideAlert}>\r\n                {alert.type === \"import\" && <div className=\"asset-import\">\r\n                    <div className={`asset-drop ${dragging ? \"dragging\" : \"\"}`} ref={this.handleDropRef} onDragEnter={this.onImportDragEnter} onDragLeave={this.onImportDragLeave}>\r\n                        Drop PNG files here to import.\r\n                    </div>\r\n                    <input ref={this.handleImportInputRef} onPaste={this.onPaste} placeholder=\"https://makecode.com/_r8fboJQTDPtH or https://arcade.makeode.com/62736-71128-62577-28722\" />\r\n                </div>}\r\n                {alert.type === \"export\" && <div className=\"asset-export\">\r\n                    <input ref={this.handleExportInputRef} placeholder=\"Enter a name for your project...\" />\r\n                </div>}\r\n            </Alert>}\r\n            <div className=\"asset-list-buttons\">\r\n            </div>\r\n            { !!items.length &&\r\n                <>\r\n                    <div className=\"asset-images\">\r\n                        { items.map((item, i) => {\r\n                            return <Asset\r\n                                key={i}\r\n                                info={item}\r\n                                selected={i === selected}\r\n                                onClick={this.onAssetClick(i)}\r\n                                onRename={this.onAssetRename(i)}\r\n                                onDelete={this.onAssetDelete} />\r\n                        }) }\r\n                    </div>\r\n                    <div>\r\n                        <button onClick={() => this.approveAllImagesAsync()}>Approve All Images</button>\r\n                    </div>\r\n                </>\r\n            }\r\n            {!!variableNames?.length && <div className=\"asset-files\">\r\n                <div className=\"asset-filename\">Variables</div>\r\n                <pre className=\"asset-file-content\">{variableNames.join(\"\\n\")}</pre>\r\n                <button onClick={() => this.approveAllStringsAsync(\"variableNames\")}>Approve All Variables</button>\r\n            </div>}\r\n            {!!assetNames?.length &&  <div className=\"asset-files\">\r\n                <div className=\"asset-filename\">Asset Names</div>\r\n                <pre className=\"asset-file-content\">{assetNames.join(\"\\n\")}</pre>\r\n                <button onClick={() => this.approveAllStringsAsync(\"assetNames\")}>Approve All Names</button>\r\n            </div>}\r\n            { !!other?.length && <div className=\"asset-files\">\r\n                <div className=\"asset-filename\">Strings</div>\r\n                <pre className=\"asset-file-content\">{other.join(\"\\n\")}</pre>\r\n            <   button onClick={() => this.approveAllStringsAsync(\"other\")}>Approve All Strings</button>\r\n            </div>\r\n            }\r\n            {!!files?.length && <div className=\"asset-files\">\r\n                    {files.map((file, i) => <div key={i} className=\"asset-file\">\r\n                        <div className=\"asset-filename\">{file.name}</div>\r\n                        <pre className=\"asset-file-content scroll\">{file.content}</pre>\r\n                </div>)}\r\n            </div>\r\n            }\r\n            {isDeleted && <div className=\"banned-script\">\r\n                <h1>\r\n                    This script has been deleted by content moderation, and will not show up to users!\r\n                </h1>\r\n            </div>}\r\n            {runUrl && <div className=\"sim-embed asset-files\">\r\n                <iframe src={runUrl} sandbox=\"allow-popups allow-forms allow-scripts allow-same-origin\"></iframe>\r\n            </div>}\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default AssetList","import React from 'react';\r\nimport AssetList from './components/AssetList';\r\nimport './styles/App.css';\r\n\r\nclass App extends React.Component {\r\n    componentDidMount() {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"app\">\r\n                <AssetList postMessage={() => {}} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}