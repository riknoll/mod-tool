(this["webpackJsonparcade-sprite-pack"]=this["webpackJsonparcade-sprite-pack"]||[]).push([[0],{14:function(e,t,a){e.exports=a(24)},19:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(12),r=a.n(i),c=(a(19),a(1)),o=a(2),A=a(5),u=a(4),l=a(10),d=(a(20),function(e){Object(A.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.info,a=e.selected,s=e.onClick,i=t.name,r=t.jres;return n.a.createElement("div",{className:"asset ".concat(a?"selected":""),onClick:s},n.a.createElement("div",{className:"asset-img"},n.a.createElement("img",{src:r.previewURI,alt:"Preview of asset"})),n.a.createElement("div",{className:"asset-title"},n.a.createElement("span",null,i)))}}]),a}(n.a.Component)),h=a(3),f=a.n(h),m=a(6);function p(e,t,a,s,n){return g(function(e){var t=atob(e.slice(e.indexOf(",")+1)),a=t.charCodeAt(0),s=t.charCodeAt(1),n=t.charCodeAt(2);135===a&&(a=224|t.charCodeAt(1),s=t.charCodeAt(2)|t.charCodeAt(3)<<8,n=t.charCodeAt(4)|t.charCodeAt(5)<<8,t=t.slice(4));var i=new y(s,n),r=4;if(225===a)for(var c=1,o=t.charCodeAt(r++),A=0;A<s;++A)for(var u=0;u<n;++u)i.set(A,u,o&c?1:0),256==(c<<=1)&&(c=1,o=t.charCodeAt(r++));else for(var l=0;l<s;l++){for(var d=0;d<n;d+=2){var h=t.charCodeAt(r++);i.set(l,d,15&h),d!=n-1&&i.set(l,d+1,h>>4&15)}for(;3&r;)r++}return i}(e),t,e,a,s,n)}function v(e,t,a){return g(function(e,t){!(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n"))&&t&&(e=t);for(var a=e.split("\n"),s=[],n=0,i=0;i<a.length;i++){for(var r=a[i],c=[],o=0;o<r.length;o++)switch(r[o]){case"0":case".":c.push(0);break;case"1":case"#":c.push(1);break;case"2":case"T":c.push(2);break;case"3":case"t":c.push(3);break;case"4":case"N":c.push(4);break;case"5":case"n":c.push(5);break;case"6":case"G":c.push(6);break;case"7":case"g":c.push(7);break;case"8":c.push(8);break;case"9":c.push(9);break;case"a":case"A":case"R":c.push(10);break;case"b":case"B":case"P":c.push(11);break;case"c":case"C":case"p":c.push(12);break;case"d":case"D":case"O":c.push(13);break;case"e":case"E":case"Y":c.push(14);break;case"f":case"F":case"W":c.push(15)}c.length&&(s.push(c),n=Math.max(n,c.length))}for(var A=s.length,u=new y(n,A),l=0;l<A;l++)for(var d=s[l],h=0;h<n;h++)h<d.length?u.set(h,l,d[h]):u.set(h,l,0);return u}(e),t,void 0,void 0,void 0,a)}function g(e,t,a,s,n,i){return{width:e.width,height:e.height,data:a||b(e),previewURI:w(e,t),qualifiedName:s,tilemapTile:n,sourceFile:i}}function k(e,t,a,s){for(var n=l(224|a)+l(e)+l(t)+"00",i=4,r=0,c=0,o=function(e){r|=e<<c,c==8-a?(n+=l(r),i++,r=0,c=0):c+=a},A=0;A<e;++A){for(var u=0;u<t;++u)o(s(A,u));for(;0!=c;)o(0);if(a>1)for(;3&i;)o(0)}return n;function l(e){return("0"+e.toString(16)).slice(-2)}}function b(e){var t=k(e.width,e.height,4,(function(t,a){return e.get(t,a)}));return btoa(function(e){for(var t=e.length,a="",s=0;s<t;++s)a+=String.fromCharCode(e[s]);return a}(function(e){for(var t=new Uint8ClampedArray(e.length>>1),a=0;a<e.length;a+=2)t[a>>1]=parseInt(e.slice(a,a+2),16);return t}(t)))}var y=function(){function e(t,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;Object(c.a)(this,e),this.width=t,this.height=a,this.x0=s,this.y0=n,this.buf=void 0,this.buf=i||new Uint8ClampedArray(this.dataLength())}return Object(o.a)(e,[{key:"set",value:function(e,t,a){if(e<this.width&&t<this.height&&e>=0&&t>=0){var s=this.coordToIndex(e,t);this.setCore(s,a)}}},{key:"get",value:function(e,t){if(e<this.width&&t<this.height&&e>=0&&t>=0){var a=this.coordToIndex(e,t);return this.getCore(a)}return 0}},{key:"coordToIndex",value:function(e,t){return e+t*this.width}},{key:"getCore",value:function(e){var t=Math.floor(e/2);return e%2===0?15&this.buf[t]:(240&this.buf[t])>>4}},{key:"setCore",value:function(e,t){var a=Math.floor(e/2);this.buf[a]=e%2===0?240&this.buf[a]|15&t:15&this.buf[a]|(15&t)<<4}},{key:"dataLength",value:function(){return Math.ceil(this.width*this.height/2)}}]),e}();function w(e,t){var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var s=a.getContext("2d");if(s)for(var n=0;n<e.width;n++)for(var i=0;i<e.height;i++){var r=e.get(n,i);r&&(s.fillStyle=t[r],s.fillRect(n,i,1,1))}return a.toDataURL()}var C=a(9),j=a(13),E="https://makecode.com/api",O=["#000000","#ffffff","#ff2121","#ff93c4","#ff8135","#fff609","#249ca3","#78dc52","#003fad","#87f2ff","#8e2ec4","#a4839f","#5c406c","#e5cdc4","#91463d","#000000"];function x(){return(x=Object(m.a)(f.a.mark((function e(t){var a,s,n,i,r,c,o,A,u,l,d,h,m,p,v,g,k,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return-1!==(a=t.trim()).indexOf("/")&&(a=a.substr(a.lastIndexOf("/")+1)),e.next=4,S(E+"/"+a);case 4:return s=e.sent,e.next=7,S(E+"/"+a+"/text");case 7:if(n=e.sent,i=n["pxt.json"],r=O,c=!1,i)try{(null===(o=JSON.parse(i))||void 0===o?void 0:o.palette)&&Array.isArray(o.palette)&&(r=o.palette.slice(),c=!0)}catch(f){}A=Object.keys(n).filter((function(e){return e.endsWith(".ts")||e.endsWith(".jres")})),u=[],l=Object(j.a)(A);try{for(l.s();!(d=l.n()).done;)h=d.value,m=n[h],h.endsWith("jres")?u.push.apply(u,Object(C.a)(N(m,h,r))):u.push.apply(u,Object(C.a)(M(m,h,r)))}catch(y){l.e(y)}finally{l.f()}for(p={},v=0,g=u;v<g.length;v++)k=g[v],(!(b=p[k.data])||!b.qualifiedName&&k.qualifiedName)&&(p[k.data]=k);return e.abrupt("return",{meta:s,files:n,projectImages:Object.keys(p).map((function(e){return p[e]})),customPalette:c?r:void 0});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;try{a=JSON.parse(e)}catch(d){return[]}for(var n=a["*"],i=(null===n||void 0===n?void 0:n.mimeType)||"",r=(null===n||void 0===n?void 0:n.namespace)||"",c=[],o=0,A=Object.keys(a);o<A.length;o++){var u=A[o];if("*"!==u){var l=a[u];"string"===typeof l?"image/x-mkcd-f4"===i&&c.push(p(l,s,r?r+"."+u:u,!1,t)):"image/x-mkcd-f4"===l.mimeType&&c.push(p(l.data,s,r?r+"."+u:u,l.tilemapTile,t))}}return c}function M(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,s=/img\s*`[\s\da-f.#tngrpoyw]*`/gim,n=[];return e.replace(s,(function(e){return n.push(v(e,a,t)),""})),n}function S(e){return new Promise((function(t,a){var s=new XMLHttpRequest;s.addEventListener("error",(function(e){a(e)})),s.addEventListener("load",(function(){try{t(JSON.parse(s.responseText))}catch(e){a(e)}})),s.open("GET",e),s.send()}))}a(22);var I={data:"hwQQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",previewURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAH0lEQVQ4T2NkoBAwUqifYdQAhtEwYBgNA1A+Gvi8AAAmmAARf9qcXAAAAABJRU5ErkJggg==",width:16,height:16},_=function(e){Object(A.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e))._items=void 0,s.handleMessage=function(e){var t=e.data;switch(t.type){case"update":var a=p(t.message,O);if(void 0!==s.state.saving){var n=s.state.saving;s._items[s.state.selected].jres=a,s.setState({items:s._items,selected:n,saving:void 0})}else s._items[s.state.selected].jres=a,s.setState({items:s._items})}},s.loadJres=function(e){s.props.postMessage({type:"initialize",message:e.jres.data})},s.getJres=function(){s.props.postMessage({type:"update"})},s.onAssetClick=function(e){return function(){s.setState({saving:s.getAssetIndex(e.name)})}},s.onAddButtonClick=function(){s.addAsset("mySprite")},s.onDeleteButtonClick=function(){s.deleteAsset(s.state.selected)},s._items=[{name:"mySprite",jres:Object(l.a)({},I)}],s.state={items:s._items,selected:0},s}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",this.handleMessage),function(e){return x.apply(this,arguments)}("https://arcade.makecode.com/62736-71028-62577-28752").then((function(t){e._items=[],t.projectImages.forEach((function(t){e._items.push({name:t.qualifiedName||e.getValidAssetName("mySprite"),jres:t})})),e.setState({items:e._items})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"componentDidUpdate",value:function(e,t){void 0!==this.state.saving&&void 0===t.saving&&this.getJres(),this.state.selected!==t.selected&&this.loadJres(this._items[this.state.selected])}},{key:"addAsset",value:function(e){this._items.push({name:this.getValidAssetName(e||"mySprite"),jres:Object(l.a)({},I)}),this.setState({items:this._items})}},{key:"deleteAsset",value:function(e){this._items.splice(e,1),this.setState({items:this._items,selected:Math.max(e-1,0)})}},{key:"getAssetIndex",value:function(e){return this._items.findIndex((function(t){return t.name===e}))}},{key:"getValidAssetName",value:function(e){for(e=e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"");this.getAssetIndex(e)>=0;){var t=e.match(/^(.*?)(\d+)$/);e=t?t[1]+(parseInt(t[2],10)+1):e+"2"}return e}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,s=t.selected;return n.a.createElement("div",{id:"asset-list"},n.a.createElement("div",{className:"asset-list-buttons"},n.a.createElement("div",{className:"asset-button",title:"Add asset",onClick:this.onAddButtonClick},n.a.createElement("i",{className:"icon plus"})),n.a.createElement("div",{className:"asset-button",title:"Delete asset",onClick:this.onDeleteButtonClick},n.a.createElement("i",{className:"icon delete"})),n.a.createElement("div",{className:"asset-button",title:"Rename asset"},n.a.createElement("i",{className:"icon i cursor"}))),n.a.createElement("div",null,a.map((function(t,a){return n.a.createElement(d,{key:a,info:t,selected:a===s,onClick:e.onAssetClick(t)})}))))}}]),a}(n.a.Component),B=(a(23),function(e){Object(A.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).iframe=void 0,e.postMessage=function(t){e.iframe&&e.iframe.contentWindow&&(t._fromVscode=!0,e.iframe.contentWindow.postMessage(t,"*"))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.iframe=document.getElementById("editor")}},{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement("iframe",{id:"editor",title:"MakeCode Arcade sprite editor",src:"https://arcade.makecode.com/beta--asseteditor"}),n.a.createElement(_,{postMessage:this.postMessage}))}}]),a}(n.a.Component));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(B,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.fc067fa2.chunk.js.map